branches:
  only:
  - master
  - stable
language: java
env:
  global:
  - secure: QF14deE5UZFHmoO6AGJnFzQECIUDUGTdhEvv2ocY2qaijQZe2olvGFijaRAXjokIBoFz4ybG+M0E/YzqYseEy6gwWbYgd8lgwbkzUzdXhMkeMN8zjclWNjY4Zgsm9fiPTawmZ4Dob6o1nwgab5r+sz3dybg5wGz+ZXHit/4IzK4JcDlXY5lJ+Erbz9bMO1tfyZH+Wdh7nfsC41i6OU8dIpyhGHbJ5gBqn8FD8kGnf8voMtib5fsI+RvsUZRA1t5dxgRPhSF7UfXK/no2kdhq2KdgD6mRYvP1Invw+Pu57NkA1HT/uqm2FZ8FAM2LJtL7+pUDbSUNXseovzZWoFWmDNxr0euVJqkGK8Na14BxL0vCI9LgeBmt0bfpDna8I+/6+Ufh+3GvK8bykMHcncmxGTcmFD9DeJScV5EQ3HnGtavC8pDymQLzmD998nrCoE7HxGt0IPTJGtRt/LIVrEKCwmjlg6V1zvJfWhbdNLZjBETTnJzcLHqJNVIyGaxZn3NBQ6vgk0ZghTP4MxbeSSWVBIpbi+h0lb1FrAOHMVBINa6EC8yXkg+2Hu6wbhuhr14WGbe1xEagTQDVBes0WAimD16gwmLbS4a9DxRmCyf/0f3Cv7j9ZZtvrsRst51WhNEmPJZ6HrNwG2rWRLZypaONcU/bkR1YUD6cBjjbxqw7oX4=
  - secure: epoIdnS6KuphET89Cpt/8qwozQ9IclrvfOKuAasDd6e3W/+2dXT5QXjBUmamTL2lKYuEWcDzT/zGY+Dr6L07X1gAPYTc2uBsFSoE12PDc2WJh5FNYH5tBv9tcv2Rh2JI+ykIzcvCTS55hy51ob8L7s5/YMa5yjVDrdsnMrWwsKoNHTqLRgTn4VwxsIpsrcG5B0BjRhNJ0ycIRWcR/OtuQ5JMsmWMsojAngEuS/uZhhE2fbrbONGk5kZ+LrS+Drl3me9fTSH8NGAgc/BZLO05DnMh5ORn7V/NzZskuMdYqtOAjrTf73/Ldam+NBapKr7mdxmLaXTw7li8v8WdHh4wS1gmzj2mNuI6dLUvjBSZ7DzjtQu3hvpMjgrzbeqlzdHgLAQp832GlObWbI/353wXoQSAV8+72wpz4LacsjWApubE5oZSn49o+OfQPhZoPe6DIVXYFnSc+BTJnp4NozVHdIAuw9g22Aluu0Pv3QSiHRK98pdEO7evemivmx7MWSD/4y57GGmzsGqcmf1wUTtL/bSakvjoDyuNmNBzM5CuWE5kGRIJmSvROmTv082v129AWlHH2nGVw8NHXImEOfcNxrd/PvovnXDLV2S+I4G+YwI/wHE8Hk31rhsvKtjgbqKXrxlCNqP+QQ4o//remrk2lqegHji4IPfI4BYMu4kFMoU=
  - secure: EtJuoTkjSPeHyrohhPcqCWOD0QX2sFNXgnNObvWreDy7yy0FkSaKqiKmx2IsAsoi62gRp8mNBg4dXX4Yuk4AbDzSgF/g8vKnYJiMVW4Vem9T4jzA/zb/qsjRc8uBAsCCjaEktZWxwuhT3/g6rBQ29GkLZXpK4BFwas2wRjSJAtk76Dea/y70NcedDdM3zC2g1UbIeNSeGmuu606QUGyiFuSqm176eeud7Cq4mmhe19Y79iUmzxA7E3fsbM/DvHIET/MuPmyYFywmjctE8pxP40PHrWKg4aS+CYGTzP/L7C49LGhLG7x+kykv1Xc+tLK3iIGBtfM3j6FTPXyJYm446PkdtkHHO99epcFO8leuZrG0qgAwyGbuXnEsHf9dO2ioXB9i6bttZwnIWzum9zFELTeiVN3euHkzsVeiSigZ+/B1lN1yQcP7GZilSZGawPrVViyOnG50FEsvmz5PMO+jiQLx07j+Z39b9NYqRwsHq5aGDZd+/f/1yhQLaZXCkh+rnRUeHDqxyR0Aq2SjQi4lNF3OF3RTFYpomHYokHUUErjNzCS+WkrJcySqhWpCi6Np/XWToh8cVDDlUNX0GGhaLeaOH52VOfkiba0ocTfJaQSAsmoyqMtAQt/wM+mebLVPvcdECjQn7j3z6M3oH/nqvl+Qv6B8COwveO0agf0GftQ=
  - secure: eAR8XEOAaW3q+KrCP+j+zh3c4+udCaH1+oSNeWCyzNWv3+HC9DGbu7X/6rWBUne9lMqs5kyN0kaHtkwIU3BpHsMf0mj1waNUzi+Ox0rOjvnfyv9BP+wFwlke0+u9hm5icCSWDbpoDcohEbiT3HcPNfnd6/C3UlmtdPiwyRFpkDlE34pl9vC6bKnDqap3zrWrlrPvdgTbLzZtW93yBKRDUrdib14zVyDc5ORxmtEwuuaUcRRCLhYzEwclFCdand7c2R7+/GH6PoIf2V6ftZbhUebBkhF280Y6XXMGrxIqXmOVY5R3BhAnT2RxdNDjpBjpwJUk66LJKE47Hi+8UJL/o4gEmSh1VP9lpCcJiFbjh94UK4NALbQC6clU5hW8wZ4AjxYUcVcfdt0dTe8zCsDSD10S2Eb+CaBUp8Qbz7PztVQiaYy/yE7CDWv71IY2StwMdDXGPJcvHNRBKTjlIhpo5lzmeYD0UG2kgtOVknwhsBK4smGTFMYgCmjDMT915KUZDIqQCvHxNXxg1czUbqD2KAWU019eoMPigJBwvK8u/MUbotsjv/sjUbwaW98s9w9tW9s5mlhfq/7FvG8WIEErZbVU9oKNMD2LHW4B8ohxpdzHvk3xmrY3mlETKj7K3kPZPzeA4LRYTldkWAKgsV69amZbGTlLIyAIOZ0Rh0dPzb4=

jdk:
- oraclejdk8

before_install:

install:
- mvn install -Dgpg.skip=true -P !build-extras -B -V

before_script: 

script: mvn test -P !build-extras -B

cache:
  directories:
    - ~/.m2/repository

after_success:
  - ./cd/before-deploy.sh
  - ./cd/deploy.sh

after_failure:
- cat com.github.lafa.logfast/target/surefire-reports/*.txt
- cat com.github.lafa.logfast/core/target/surefire-reports/*.txt
