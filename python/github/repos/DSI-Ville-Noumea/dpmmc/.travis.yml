language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
before_install:
- export TZ=Pacific/Noumea
- git clone -b travis `git config --get remote.origin.url` target/travis
install: mvn clean install checksum:files -DskipTests=true -Dmaven.javadoc.skip=true
  -B -V --settings target/travis/settings.xml
env:
  global:
  - secure: qJrUSQk2me5tZz+iC2R9TfeGPtqlPilYPudIGzT8NvXPdLxTSfjGNQRRISj+JlFU9Zur8jPV4UgG8uB6f5bx0Swe/56yuPZMa5MZw7WYdOD4nHZViNfG6VKoHcVk3JODJdq4l+5jFce/L1/634b1MJ7p+SSdqKCPpI/JrNmqAhNVFt648z6+EKVtJB9zUTKMSyCzmBGZLC/F6Y4fvLO8CavRbEIhP1DcvQhw6TVv7i4VKmWhSeglcfVYylgCyiVuM4N99G5XPr4mHFA0WqL9cnRaMiP1YxZ8y1dS75FjkxQyYOw16AqotBYkNE/K1svv+5kZ4KzvB0n5vwJFOlM738It9r+d618ZP8WYLEFkLqcUIhd7zK0ouP14ZbCiqjHcqx/juRsQ88yZfahWxnkPT8cxW6Cs3Xu6nJB0SagLGNVY2uBCDGtetWvHPH46QSALV2gd70li7PrCdbx1hUf2dHWm3wxzJaJ0wEcu+CGvUa9OJS+AnNtHeEgt2dY9jFMPMTmxS7q7kqHKK8vIr9r14BVnowQKDNiDY8t7uuAAnPP50K+hb175mrKm4oa6Sn1OJfNzLHu2ZLP2/TaqyVsA+eBTdOm5WCJr2IZAOKXkgrttMK2Wd7D1NtpmXGGXOq0Mg7vlqpU0cOh6kZHKzFr/zvxIvkNMFsxuEuE3YyV1HD0=
  - secure: p8dtiMp3YketVjh3Qyq4cvBeud6p1nrasV9dZUM3d0+FAxZ33fhEGSA4ko+Q7wODVAA57EsVmASenL9NlmNU5cKN9qrQI0Zaqd+9q+xxn41PlB/m/3/iwJR5QT9Gaxb5o9w5c8caL6n4cx2snT/kgftzJD0v7Hl3GJ8IQNt0Z8AOaANv49XWkNDcvXN3yLlpdrjxiTrr1Ohx/Sq1gy1xqWVIKCbBP6zU70dTF5i0ouFgqZgQ2tSxfSrgw5EbHlFJ5RwqiA9d6IiO49T83y2veIusjLadH1G0QjK/vOxuN5PR3xNDXhV7fO62brarWYvvRjasCbPQhONHf3zajqt4IYR5KByj2zX9Mk+H4K+SO6MGWxwaAps95AHwzG/DApN0JLTs0rt864AyeoIjFrqrhvCfefMo0pqxBS1TD544qzmB1/zXIcH+CBy6BW547n64P2IaHi0K/Sj2fk4Y1iVpFuCKX2x8M8YkIbitnyZ0upjzgjzzi9ZQ/Bzt6sG05V+6uDqlQi4sWZVHjuTv+YkxJx8LP8MDAWOkWYx67MQiRsrJ/C7hzejDHUgg204XaaaPyuaZinW2/DzExA2YoI5KcwfvnqGDJzmH8QcN2VOUpAu90mYvdD5yh3qI51mgDNjWcEOCSkwxR6iTCwT8m/jEYiZN1tZqURxPj3LK1xlPzbM=
  - secure: ne/4l4iIQIoqG0iPMIW29p7/EY0Ojj8S717a8P38hZTciTLNhALvNxkOLWXajKysRmGg12zHeFBX+23JtzO8Bi52nrb4zyMS9cuHWjW/rfLFUN2Y8Z8xH051xuwZxnTW212AtBcszgssaZrp4R58+v5z8W/NEyVbC8tWahL8Y6bZLsh1HUkx7Xja1TPjGcGTCmPekxZm6lBkZSpOYmrP71MVyBSGblU6gpq3+8oivVENFXroEhSpHjxsR9CAPEiqk7rNH9o6zxAEFbcZHOpXE19O4rb91lZyVJLyDOo+pQq31nExzGWnP/L1oukfy7prL5rXD/iPeRCSfbQtvJTx54BqQzQk2OkbWvmnQ9eN/Bgix3wjSPIuKagyQG45SmszETQrmAXrylZSzjV/SBxNQhWXCc9xsq4i++uL7nKFLvydNDMvUMzyWPn6wAx+eA8TC9yMu4T9Gnwg5ap6B1CLryIV0ylQUDcXxi+alXd1i0ysWndOQ0H4PVdrkVJOX7aiDLfTAB0BMu1f7655rvFqLQS/6Nrg+zB7zPbfGDuDCcKw+HP/9+PBBciu6Ga1NYcfYA0bDIwMXw0g5l5tQ8FBrnWFMHiLsMBng1Q+sdQ6QAKRHnD2lsBpEDfH6SWKRkNZIXSyk74j/62SHlAtuINAPyxXDd+F5gxnSPngeviZe2A=
  - secure: Yxb8i7vLSeP1DmdCBsu505nWQbzTq2rXc3a7JtK1Q83qfQ6pHUuRQT1WGZcEQiqCYzE8qxyV+JJ5glCEBgP4k5HzWg6psjEhv+3ane3WXUSYpz5ECEyd7TW5k9yFwHo6O14lQYeVpXEIdpkqCcOEDjPXz9cqGJcpixu/vK6BwaAM/DfsYq74XsxdNY2rA0zXmJvAwTEhV+But6j4W/pLyYk8a6zH7Iw+ohX7rFDmRB1ywBWaCYHOxEAO1DnQhNuozH4jy1i1+zm1nX7EcVWT46OGu40njJ6/Eg8MciDB/w4P76JPxOQulYR27NY3BPDk6K/LhfPWn8gsZlbcls9jzrvYeaJAFRh8GIC0gOYwyUZBHndKyT7Hf05t+l2vuADhQF48BGDBznIUBuDKhr1nfZhCHsdow5tu739zAST04T/jkoa1eX98mh6lWkW4N1bMgVaMxUPE5DWR6rvVl+YzGQmpnyk0MMgOfrDBD830dwgqifPE6npae+8VAx6n1Dql7HgtyY/PhRxzFqGYPieiPHlKjg7j9WRqdXVK8TzI3IaTccDkK5CqzNQFWaRoWKjWpRc3oMrMvKZgSi247zXyEElT0rPqOizm8Zp++I6UhdC6nf9rRlnci3ydgcMhzl0gyuwkyl/V1rMguY2toVhSOXQ23tN9+zA3XCr9Q6Tl/oA=
script:
- mvn test jacoco:report org.jacoco:jacoco-maven-plugin:prepare-agent install
after_success:
- mvn test jacoco:report coveralls:report
before_deploy:
- export RELEASE_PKG_FILE=$(ls target/*.war)
- export RELEASE_PKG_MD5_FILE=$(ls target/*.war.md5)
- export RELEASE_PKG_SHA_FILE=$(ls target/*.war.sha1)
- echo "deploying $RELEASE_PKG_FILE , $RELEASE_PKG_MD5_FILE , $RELEASE_PKG_SHA_FILE
  to GitHub releases"
deploy:
  provider: releases
  api_key:
    secure: OU69MjAeTGQgedULzmvgsz1hVHJ5mYuGycnScgyaOqXm/wWFJsHWkR/kMmyz5oDBd1fPf361/hVBGYK4yFOFjAqjyVURVqjlLZuGzKskyExHCMfsgBV2DHYY409VfnNXrUzsFRs1qBAi3HOjULlk9JcSRI+FmtcE8/sWWRv9YJh+F29txRm5dV/RpLBe6r4iiS7H86vWt0Pp5tQb4c86IXvtD6ab0S9DmYUEcgB9UX1pNPVjWYWDgmurk2yFd8kZ5g44RZkK4CuLF9mS2PY8vyc9K1brEzNoj8gyGdyDnUl9m2SQJfaZypdaDpaBgDHzCkYqoSWjeU3Zf2iXV/sRAy0lbJx/K3rD4cHD+qabn3KnqB7srG03ru/0xP2Icx5GNyw87uUYFkaWtYV1pU0EeI/oHAgYG+py6jAbTf6AQdky1B+G4TZBc1eiUuVZjoj1XUKecGlCWUumBFIS1HIeWAmtZYPQsNSuUDVS8FZ/JPAZ3EgGmVeoN9GUAS4JQYZyUa9KXeZADaPL7rSPJzk/OBJBf7T1gS/R19YQdLqBpLaDaMSP6Vub8xjlVBrh3E2g0oVZmDaF+6qXp+03ZdYllakWHP1ijlSlFxAL3xHYNXBi/j2Eyu0SNoB63+fa7WDH/zFZ3u4t5iO5IwXJOQcwJNosiwueWJB7hG4uViThwLE=
  file:
  - "${RELEASE_PKG_FILE}"
  - "${RELEASE_PKG_MD5_FILE}"
  - "${RELEASE_PKG_SHA_FILE}"
  skip_cleanup: true
  on:
    tags: true
    repo: DSI-Ville-Noumea/dpmmc
notifications:
  slack:
    secure: ghzvsukKheD9kPofv206fkEuCnvrC0UteVKzH5Z3Er8+HiqokoAx7B7upCOsvbaU6y0HGhKGB2D+xwDS6Q8/DtHAvvNUOIAj1kl2+DxZ25UQqwcLoHvBWZSgbB+4dmIJ9Ut9UgTq8jLqAIFbmZHgiQbQoDeBPSwQhC/r2F0vfuL/7GschVKDK3ReqJed+HdaX8zJ/lJucngJ7GpwmIRrVEq9a3rBDCJo8aBqSVGPSCk0CLGeRPMEh5XuI8v4U3KAprS0m/c+yKtiiKio3rUaOMHC/80WlN7F33YqpTZJ3hEzB7U4OUyEsND5UGGTb7RMN8LWhucOCIGDG9raoZxtOezdAYS6au+t05fiw67RC4Gr2usxnLlr5rFpfhgncADeBjEu4VUfRMPfkz9+V0d0KZyVDzkedEvfR9FfE4wVfHafV4XyoA0/SPl0bIIs+qVSdhnpd8aLr5+CPBNaiHXgsVhRmTxPrgd7dAoT8Va/i00SfdIAMQwKwTul3dVaLfdRNpHYp72ESgjX4P6HxdHQmaZ20w62gUrnefR4Nm7FIQpJkGOzz33bmYVv3lsyGR/xno/Fs4CmIA+fhu2186lL7t6D7RmPxtNaoCw7UWYBmF/DJlHJpV6ENl1OUZ2dPo36x2wZya2VHQ2EfA7E/3AVSANolD/Bv4XyWFtNj/fZdcs=
