language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
before_install:
- echo "MAVEN_OPTS='-Xmx1024m'" > ~/.mavenrc
- git clone -b travis `git config --get remote.origin.url` target/travis
install:
- mvn validate
- mvn install checksum:files -DskipTests=true -Dmaven.javadoc.skip=true --settings
  target/travis/settings.xml -B -V
script:
- mvn org.jacoco:jacoco-maven-plugin:prepare-agent install
after_success:
- mvn coveralls:report
before_deploy:
- export RELEASE_PKG_FILE=$(ls target/*.war)
- export RELEASE_PKG_MD5_FILE=$(ls target/*.war.md5)
- export RELEASE_PKG_SHA_FILE=$(ls target/*.war.sha1)
- echo "deploying $RELEASE_PKG_FILE , $RELEASE_PKG_MD5_FILE , $RELEASE_PKG_SHA_FILE
  to GitHub releases"
env:
  global:
  - secure: Zvoy6hRTgOBVCWTPSkO1NiKYDrqHKI5DWLnHzNDsqO7HAA10IoatQNXYIThtjKiKWgmGI6YMkmTo0lAA+qShmRTYjTaX6pkqRdNQmEgK0Bo2Lc7WcmFoQv4+EnuqdP2ZpXquGPxd5w50QQM6FMdkBxl+0l8jUhXibkdiCuhOv6kU/HBCqclIqxSA/qQihBAiuZ3fZc0ATaQcGJp0T+Eo4KFTHsOwnrsnZFBqgGt77jJCqN7edc9PMl8jep0hjS+vZZvOoPoRniSMSFpY5bJ3lWqLSIvjzw6qL81kghPoG5vgoHs51KPIiyQULSPyRuOqwj1l8tF3vY+TtiA3EDRj3BJYe1hDD5T0PDPCkllTerk1OHrYNYBKk0vRZY7ECHRbcGIVaqcmOWR8vbIgi2vIC8ix5QypBOoGTVY65JJSOziQ8GjxXrLt8UpVb0BjgmwXjWuRmumgdp7m1m5pZfd8RLZPeN4y8QKoGJvenk17BszhxtehLX1PhfOtkyosWfB5C0Odoa1nAXpMNjE2V1PfvIje5kKDCqSF3llyVTo66gFBY8Sykge9YL6K+cEuEbJlf1+islYLsUYa3OfMVAAb4r+DCnkghFO1VcnIQHQRS6+/mFqEoINN3pqER0V2SoSxRWJMaP6dPjUzgZTWz1SJ1bO1PORVy4ylmNsKEWp/sFA=
  - secure: aeyOhv0pbdQhwvzUNVQVzKQs5MvKPrKxtwrLAQtEvc/1/dPDUfJFPK2refVmf0f3vsez/cg1/kmkvg9wEqKVo6EzEIqQgRJh7H3JSJmBbdBSaNhd2Yr0Lcmm367KOwh38a6uDTEHJT9fGj2AfsI4Hg5I966x2xZ1tsSztWQ8K4lDSHEYugzwMWFGX+5xKuz6IUK2fwueo/2IG1SkANQoLL3uUp0uLnKMVin5bk+TkFk6EcLoG/Wps5SqeR2rf7ObLAWiZDu/jS+N/KEEThBksJ+9Hoj/B9LgFxBZGrSrjKa4kGx4Kfsjud+4cw6zFjNS1ZkiLYtTyJioOCPW/PmSTYGgq1JSEf67Wt9vLeLU8PABQDKCTMoHNtIOOECe5DypSzrQxvQ71z1nA/0JVBOgyU/PoWX2zza/YDg0SbOblBSgdBaUoPk25emqh0QnOF9GZLMjKaF3b8BysryOVPH+huuEg40MGB4PYCGMX0hcIncpKMYqI5u741bAYiIkMqCMhzTxuC4xxnLrXTL2OAEpjTcaThoY3Npbsqc0p3RUX9TMFymjKah6BAk6C3wW31XWLmK02Clo9Z5Qp6OUwIhGDWmSqeAFu0G2wJutiJ0ZFikz4kL5yf947KVAtHJBPetE3OyKGVSqt8kDb6YLQxe+4/2CE3fzTyCtPzw+b2iQwxs=
  - secure: r78CFRhh0sDS7MWOpUxMZMYXVQBdRbXOHVlSl45MHur7eDnFhXGSB017yIkek9IPa/KSHX5A1LxXnezPoQ6s290cG6vsU+518tM+IKec9foCzCbcNnDCxMDCFWXpnG66MRIax+NenhhhasCQYyv0L7QR8WMxXzI9K9UvnUPtY8K65Dd6W/x5TetTDMpO2HS3tZV72b8xcGhkhlFonWi3GOAIKdGZXSEtT2MooVn//KYjCn5OA7OWZiNx4n7YDLubIwf3ndR6Q7CUoe3JbFfS5e8NrTCaTvna2OFjod7GCs1TvhTPgxM4HXo9dgW/NfjcWLdtxYYnsGzIOg2qcI9PcatAPqVLCGYOFGC+zEIremA+EHhUd7gPkWH9uVHbO9s8Pti2Hx/o9VuV8oJtBwsMSgx/2X3r4Vo4Hpy9F7gLBz36G+GFW2oKSl/ttcYBdZvJunmJwWBA/mTT1u+Cz0/DylXvHPrpr9I9vT//9fvhn90kljZrGUk0nsYBavQHWWoVz3uidY1DIdBNa79pD7XBLFtqoawRDQWPFDBfdNiynd1M8wPtZymNwHZLzMxkyfjYjdmgAL8lhvm2Yj8nNxP1nKvzAUhmNjBXbbsLnFADV7jNeGm2h02jdfEvKLabLsZJLYUbk4rCJSVg6r9GtX2NRLr7eB0etpJ28uhEuSSzftE=
deploy:
  provider: releases
  api_key:
    secure: K3mkz5aV9vF9VIoIZWIB6LzcUmIOw8uCXeIZZq8cZPSociwIAh5BeJgCHr7UVxvGE7NG+VfqKN3fZ9uMBWGENJIUN2XiDgmGdPxSAS1kInQS1b+7fni2ctQO6Rk86yweWRYto8chi+lE280SrKRFMwjUrvTiGzo9IZTWqbAqL3Nini1n8MQdEFThntpo+UaENHXcyBYVXAoEz5XZKawpKXx2y2LDa031GDHAmbHMn4EcIGM80VMqGFoaUkJbC3v64vwcIw0ElMKYGPqQ6NciZZwMi7hVhLL5iVpflO4JLZ9jh6/9tcb8ia+9IUvV+mpZpMzqoW3q/prTwiT2xpFExUUE5Pf9vBkChQ6Jd/qIV+TGxxc0VXO0O2T5v9BcKH66JJ9VwJmjq8lNgUle8O+l2+3NiPvneQ3PMCWH1mA9GSdXiuRBLsUX0iaysKT6HODF+Li99NrAfqmBcUP0sCP8Aee9gZ3iz8t5sc7z18QCxIo5gfF9uA0a7eFb6GKZU0fU6Zsjoe55GF2Z/cKMZR6is5QFGpA/rZceEqhweQqxnifNtCNCRh7NYEmIp2OObIpTQpJxkz2geW73npxgcRwtm5M9P/gH32zsGbes/p1/d2TEFFxjGnS0aUR98XlKI3P+y25zJi/6wqPY4+v8MiuXso/E6BHKauxbRCRssW2UXlA=
  file:
  - "${RELEASE_PKG_FILE}"
  - "${RELEASE_PKG_MD5_FILE}"
  - "${RELEASE_PKG_SHA_FILE}"
  skip_cleanup: true
  on:
    tags: true
    repo: DSI-Ville-Noumea/nppb
notifications:
  slack:
    secure: PTuRrhwZeMNaOpP0HSpHVcxcrZlAF6KdLpDRu+fmY0VnjuVKgkWLABWm+JgaLLinJiGjDeM6JFRRdus0hwbp1G+k3P+EwtgLz9G9Noe0IR9HxtOLVQEpIaaZffw5bVHhtGLJX1Ko4eZvPPkK5Gzb8ZGjtxtE7FjkTFGdrhTQoAXA8RGfKu7wbpQOpvWRRCECbQmHVuV6F9CE90GtXxLmHz+G1lbYcrESlgXPxgIyLqYff17LJWRC1mciJCCoKr6HiBeS6bmYxchMgboLx9VDjADi7Ahso7rJr/2/VRxNPhnEEM2B1HQFeYB8aZZhDQcO26r6hSA0MlMb24M6w2RDJZkHhNrLo0ANP+1lCy+2jw0JUQWhUvsb4xjlFLU4Z3RT8RC3WYaLtD140tOdLIjg99CK8rRDRMeLrwIXEhQoEalZ7XmZ0U77I8Qs43YwEdSKYXhGcdJNOJWkebKYv5nlYNfVgS40hVgwNWtwzaKlKk1u9o8/FcL2V4PS9ImTMnKNUZdiEIpVrAReDA3whil2eRLY8bUhw4TcH0rLd41VCOj21U+YQwZKL2A+C30mS29D5S5CjKTSYXpcZuVIUyEB04WjglezkgieTY6GXwQdseIVmHoxP4ozMZKiYRZn5R8u2itauLhz/A5rVs2x88RVvvr9Zd47WFvHLvjsyAfy/KA=
