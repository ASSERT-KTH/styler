language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
sudo: required
env:
  global:
  - secure: qE4dWnssp5jPQGKG3l7AdgFVbfTp43LUWQfphoOUaOUU4ixxPEmb1GnUesWtklBTbGjMIUX2KSxpHLTL4OUrt0CC5rwRpnknmdjrDNIxPQP9qmOezG4cuQN/dLQFd8JEZ+WHdxXBY0dsWSgFaj5OXQiWCAU+SV2S0Ybo41AljGe/X1OBQJKfSmFiybKukiZ5qqP2ilEp+7ik3mDR9PqNAqswmd1a/ue2Cfs9USRfi+N2j1jCkZZa0sOXMr7YwHhVj7r9GuGNLmoYpkpf5aLLecVAuaCR5Ot3zUE7dnE1iMv3YnBhHHCVUn627BLQZ86eckW+iXXfOBHCB8jz5KEzbr/ABP1G8aUI16UUVMi3n2IFADILRlCKkwarcmOwZ7mrMvKt1LB4pTa+OBXOPCEv6/bYBYjhzUzjO0prrEumq77R8jqQD+BzKVFnuDRyvPzsqL8uzUR8wbQR+qlYGlIkTO0JWBRO4zDgaT79al1M/YY2G48tNvm5mYKr/BQLcRgP6P8sewYrr5OuI+5taBdsTXpYZ1TmYZG39frAQ4vsF1B0cXbpbGZhpg4ieKEi97d9zTM8QTqSNHR46z8dJDzw9YttOCkUWF3RwcAI61PnIwCqZENMgHxJu/1z3O6A9L3ymTyG8JZHr6u8WUn0mwu+FqNFvHOTzmCT7hOEgHxcIWY=
  - secure: T/YnPh6tmdksrl6JymnwWWGtJM9EkrCHPnpyewdXKEqGeJAIFGmYUhErAQLUxG+itEUYCL5r45GECqzVhU2q04yYO7l/c1Vu/idXQBHHgkQCtlOgQbjdW2rTJAXNFQFMnF5OQZQdXRWiW7pb8nladltBPeU9WU5swmgH33PthYN8OXUv0t2WGBpoBCNRgoTqABhIDfuyg4Up4NLzPhVFvBkRPjecbUMv9+dX1Si15LKl4ToMHnod1SKWL3P786I7RXmOE7/vrKUT/CnI3gSW4pOUmm8MSa//43ZZnMsgwgMAMkOv+PhM8Qd+FAG2OKwD3oYRAU1D2pPqCPxn05QbcQWkdyIN6nrMj4SPoOBdBmgJqZlt54SZopYKgy4skobZU8HcWd+tdJtNL8Iul8eWnmpEym2thIPHya0Jlr45xkd+3El2ktmwjH94hlRxMK68DzYXPcBMBF7UwxawX+uJA7xtg0Be18anl8MCt4Hm91GWqfZpQEd/1gzoMwJGCCzBtM6FQP8bIzRV1Iwrh2mXuxn0/3y/A5JxPClqgjrD9C6969Z77LHT8LAIG62Y6kzo70b4oODkMdGopy7dCEL0mDmry0MM/3yrVQbK6BwJ5y+UYAq9rRkdoJjmBCnggK/VFh0xgsVLTeQcCR0fgGB/WQk238zoauObGDMBUmP6kA4=
  - secure: BgzahbZTnFD9YB82HBEoXnFgR0KEBd7yN9rwEMjX2uiNUQ2ErlniXoPHF4BpyV+1CBUCn4DUYKApHehcHoqCvBWKi9/ZvAomqeQH43HSkZ8uLIZKvOV+IPY7nBHIOE7YPlaDVtf9MnON21sY16mu5wW2+fVuDl9nxW1UaLfeaN4Ob96vtuKgcXwZutII37ZRVRHTePqUcZOFUpAoYmFnBu2zDbOn7ltaOH/NOkxAFW3UX1cfvgwzYIgSRYAGuWjb89obEn73ATM1fCim11mIp1QDzdpEF0Au9t1kYBtSODCOrtVMBnz79jTMCWtP4wA2Pb4nvZC6MMSkdgdGkUZx8pLXPqvI7q7f9P2v9RqETf6pR1VY4KFrHLP4SRtqUVN4yoJmdQK34TaUnk2gUlCarQZA58RC+2MPqr/rxALhbX+aApV5TCMosHjdrH5Zabz4ecHJAla2Di2X5AUOz2ForTdwXFr5C7k+nNG0qGudSJSZQfplOUU0/CRiaX4ZWaWdKszvStZw/pTjoginX8c4Vcg2tHyBL3k8Pp2vLXjqCCLwkpy/pD0+NZzN+SkylpRL9LqnD76MwQ+olLPh6ze2iImiohCDO00W2T4rbiytmBPaXoMt0rwnZaHrmFcGxDB2cB+5UNPVGPFTniqbrMhsynBBMWnH2fJMrixMPwdl/fc=
  - secure: y2ujyGKymj2VrMNgNLjkQHXZdXE61bhtSaVZKUuWNt9r9SCiCJFc6v3NwRrR0FKMgo3j0TzV0QYUDNj59QBv1Que58RD7RziUc3tnBr+3fS8t5Zuuus/OfQRniF5Xwfu8iCB8LqcuVBZlj7HFMmy9TTQxhrkqKadDjYS6+tGpfRUj1cGULqjuGJxpHqwZ8cMyiW9R2yswd6ue2FkZpVOHwaifGKK+0ZfYVclJJQHzoD1NSJUMM4diUba2KZuPoy7m3gWKVBaG7XfneNwIPXFY8w7l8dWwJLbMGu3u+9fGNyKQoSwrR4+3kE665eoD5aVpsMQzYbDgbGcQDnquB6rmx//4GvBrz4bYaGs9e4zP7RbIMimdADE8+FVuF1AyK3HGCij/Z2x/GQGkOVnCfaMHS+vrb2SCaFr/vdFWz8eWeAb0qnR/XT/XHv7W+vwFeLIe4YdyjvDdo9LIr8DR6pl8sgLx5ftRxHi8GvJMXD9KUKDGvpUTjib5jP7ZSyhmW282XlmPNjd7henGno2ov8GamY9EjyEOW5NO1zFGQDqcS8HMQ06wz0xRpWH38yS21rZHuIO+88QN6Kr0hhJArHd3DqoEwtf2vFXg+jVyuQU7d7SHkYamxN5sD1zq6cAaQuB+2986TSzlQ4F80y+qs2dEe9rHBTL4/hrCOt3tlQbV84=
  - secure: k2xs+xCMeogr+OymWDEvjMV9MEXxoy9yuSCVw2FOOhETV3jl6od9iKR655Qd72uqWZdmTzV0AhM4duvUgrhpr1Iqhx9I1qfS0zp9S9Lfx3MQL+QfICRqnlPKPe2Y5xSM4UUhijtjtkub9NWhvMf5X6i0D6SpnKVPtCmvJvDXQJsKU4EMibfN+H1pdQotaHaWci+ydS2Rm87dg67jHS1pUr70AF5CWqAc4sq4wW5e9qLwC+4exGIYvScPkwQAFTYR+5TdKgptRATB+7kmfs1fmFkADORDgJ19g4rw7Fi1sWaCApExZzMJX/Nl5Gh6E4imDNi1c8M0GTN9YA5e5znPGl9Ib2TviAOi+HhecOBf41OflE22x01vCv1QSlPhe9DAXHEMhSvtJQa4cSxydHm12eSIOs6mK8glJYdJP5LWdgcaVcYobPxdeKf3Wcx9wxicCkHcQA8QdJsegb62WK4vYSZlzB2UtHhurX3tr8egKIXVqVyZEXK9VL/QwOUgYs7vKzE7oPzNt0Cw9PxD6KCKOAiFdE3R5DTDp13C2hx3ENj3egaOpbFWrSnbq84KDVsMTtF3Gehy7uLeayiTopl8kimNVh1DOAA8XqOtHLFCvHhs9p6Kg5E4awEE1Pl7ouwrCSFHpIVqMwNXhBPVpu98LRB53Ct/A/Fhg4FVxSG7OZM=
before_install:
- export TZ=Pacific/Noumea
- git clone -b travis `git config --get remote.origin.url` target/travis
install: mvn clean install checksum:files -DskipTests=true -Dmaven.javadoc.skip=true -B -V --settings target/travis/settings.xml
after_success:
- mvn coveralls:report
before_deploy:
- export RELEASE_PKG_FILE=$(ls target/*.war)
- export RELEASE_PKG_MD5_FILE=$(ls target/*.war.md5)
- export RELEASE_PKG_SHA_FILE=$(ls target/*.war.sha1)
- echo "deploying $RELEASE_PKG_FILE , $RELEASE_PKG_MD5_FILE , $RELEASE_PKG_SHA_FILE
  to GitHub releases"
deploy:
  provider: releases
  api_key:
    secure: V6DPnx728n0cIsb+IGYutrAOLsBXGnFwRCWDwcRYzHNbttRNFWZPZwAfeF7kgqiYaIMhYUjlvCT1tfX1w+P+lWRml4BJzmwl8Wegp9EVhSUNRWmxCA6t8tzoaoyi4KaYL6NP0iz/FzH/pz7ASPtv3mTOMBoBaXnepweGEVFIjkF+WgfQo4x3AEWoiArH83+ioDaJEaNFE+a8d7yPfqLqBamHYYDCUJwSxVcME0FHcVpvEUdPAJ9z4fQ0v38dej2JygPPfxQZBjt6rrJhZiMaZLJAOrfR0xH9UfbVmNI85YdLmWyv+AkfKmv39p29ZHJjLxQXRA6vSwlC6cTscXJCOjeuZRkkaEr51nSTqmj+MSrq/6TDN/GnHelewnkb19sPE7NLwH20upxbaEjPdUhZvbq99hKtUmVONaHCwBxcj8gXV4ZaSgyl42o1L3nFoBk5IfT8VaQsV2vPrMJBPgmTkWPFcMTWPZ/kI4Urh2fG2aY6wKPaBpJRE+tSRUf7Lj1Bat7BEGYaLgBMKJpMRcB35vYd17Cf4Q1hGe5Im+6dJ+5vZU7S5NQuaFe4W1gHrTXfd/73eBpqtdoGowbE5vmTaPNGmiYPymyRJakcYO63E0ftC+iNwO2cevEo/ulgA1HatLOLalyKbQclcNO2gWOxDz3neJyJBudlPOY+JW2aOjw=
  file:
  - "${RELEASE_PKG_FILE}"
  - "${RELEASE_PKG_MD5_FILE}"
  - "${RELEASE_PKG_SHA_FILE}"
  skip_cleanup: true
  on:
    tags: true
    repo: DSI-Ville-Noumea/pdc
