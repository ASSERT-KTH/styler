sudo: required
dist: trusty

language: java
jdk:
  - oraclejdk8

services:
- docker

cache:
  directories:
  - $HOME/.m2/repository

before_install:
  # allocate commits to CI, not the owner of the deploy key
  - git config user.name "opentracingci"
  - git config user.email "opentracingci+opentracing@googlegroups.com"
  # setup https authentication credentials, used by ./mvnw release:prepare
  - git config credential.helper "store --file=.git/credentials"
  - echo "https://$GH_TOKEN:@github.com" > .git/credentials

install:
  # Override default travis to use the maven wrapper
  - ./mvnw clean install -DskipTests=true -Dmaven.javadoc.skip=true -B -V

script:
- ./travis/publish.sh

branches:
  except:
    - /^[0-9]/

env:
  global:
  # Ex. travis encrypt -r org/repo BINTRAY_USER=your_github_account
  - secure:  "wO8CBpnZNy0/5LTXn2VLx+VrXU/wt0QLjuqm9OXdfNM8mmCpvK+kdQmYae/CXcU1ciETlQgQsKYYc5ZHrVTE+bcKR1CQqUB0/WsnO3QnvgPk1W5/LXB40as8XBYpqGGOMuJOAm9vYLJhJ1YBbDqsnMTh1w8kSf50+TGwgWEMFu/Pk9+Tr33mg5CxoMmeH2zJF912l47yM7LWUWXTZeTc5lVQuipBAHDN5kt30m1Uola4fIevvpoGhqVk0avy8Tt5ackZai9t1UBdE/jtLcoFIqLCTdDsAJUhGgO9oh5/lWnLCC6QaM3XK3FWixKXOJJ5jBgwfrYwtK2sZrXdUy8PM1htKSudu57g3IFWvkD1xbMrocC69Sutd22QkQBXmeRAj6DylaT8w5CgXga0hXdoNmLCk5Wj9yosktL2J9qptII5tvWc+WW3IBjXSIxZMIfmaaEmVLSDR93meegEeK53aUHgLyrZ5Ys3xKhXIOU7lGOUOvrA8kg3XhR5l511q1PSs1+ddQkcctUUOrdtDDQi2OmCD3fIupQIiT7yuRN9gOU7bV0CNvYLATKOwUOiKuM0T2ZtaeCveUqj6DwN3g7Enb7XP7ZqN6g/pwP0y+zUSfESpJEAisaBofMQrrj5Pw9uAqGYRCMC7Io0sZi83cF1WyVfTT72CYYxg+GNnywZMuA="
  # Ex. travis encrypt -r org/repo BINTRAY_KEY=xxx-https://bintray.com/profile/edit-xxx --add
  - secure: "js6uopwOoSVcPp9bPAffGpjy4IT8XT5D+DONGA6Ezg8vjBeIAPdzu81AjyN/0ekIEkggdNaNssx8ZWDzw2qnAelrz/Sc9hGecIzlCNODok1jb76uKmbxf802hiWGuxjV1LCH4OB/MfOl2MiI4NPKHc+GPR17+lup+Bm73EOijWgIOTbNIwL81N6+vM2YqOGICXefg/WFSOBFj4vnJN8qDrPIScpn7RWPQkS3Rb1pzB7jL52gRU6jo5fv/awqj3dfvqZStNojbWY1EQBRRf/yRRi4OwQ28H+jN4XsTco7qNduk0O1RW1o0GPxez4gQHPU+Bg0UkfDbcjl+Opwz+ge/zUZoYfCMs4lFRDLWfQgj9KQTuY4UdRN1Eosfo2+TOBXlmNL+UZ4LtEJVu1PsNdOxogesGEyqRCMxeOrmQhtOaR/hiidudVq8pv7i2KsJ3UUC7Fkxoupc3u9LTl2EQwy4pshtIJXMNYEfF0C0i7u/TvPMgpbsOXJIGE36o3b+a73Vk+cZ+EsOqFPoAaQTtyZGz/2y40/nPJ0hhtlAKNj1fhyC72EXJrR9XjyEfawPO8CPXxgpzHXVp9RO1pprKO3ly2DTAVK1w8qyShAacKbS8HTqJA9acCwOuSa/QAnigWihTh4cUyUBe8asv1ri9uneUiscfxQfCIB9a6KLBTiiPg="
  # Ex. travis encrypt -r org/repo GH_TOKEN=XXX-https://github.com/settings/tokens-XXX --add
  - secure: "HdwghZgzn35a0O5+wmLE40pvnNn3s2g5IjVHrlvUhTIRKgQk0Mx9zQttkGloi57FYgVfXSApbzdbL7wrmYf4NMyN7F0ul8FmBjtiZHIIdknF5lnT3yMc5BDQLTyuL8xtGQCrOC191eWlAU/mwq0D6OXy6LvOLUPF0IJrcT+EkTglDJt8OirGSyWplkl3BDyUGtRMI3cR+Yn9sRwEjhSfDzzOFS7Nxdv73QPXtzl8Xspe0rdpaAVrs5iVq7Ewna0f3fbCr2wSvluZwkJXmN9rfJgkAL6qnJ6QjzzF5wxZgybhvHStDmFcHPNQuyiP2vhAk5usCYW1Hy/BrR70HiufxtZPg34yBsSUkUPVW/UEtcZq740859WMSbsmSZrsqfHpxb0zh+qMzkIFwyOEnEWt7535VY47Wx6Fq5e+a06omuh7+0FazieCH+KZ0hNwMgePtANGrZSRdbWtDdJ5GydyJjWZQ5H/AWJ6rX4M7mjxT5apPqYhtMem/ariGbrwTQWACM85XERaJgUHK8n3ZbHFGGKtKq0fw0aDQ/Cl5V/3z5tsDCKq7IzQod1tgizQMFeLuaWbb3jZGVRN7H1CAjREpdq2/3yeahor1gRh6rjECGsN1fyXb7ZY3CY+rHg1x9hMLW7JYLd+ltTCrdNpCxBMQCsxe+RscciquKM2/B6F3Oc="
  # Ex. travis encrypt -r org/repo SONATYPE_USER=your_sonatype_account
  - secure: "mPIOMTVWnEcFTqWV0z7Gn5uHTNV3LZw6NfMRkMk4wUxive+NNzIHlr/JluissfRSYRRlDF5LbsGsrrsn8zBhU9qi4Hnz62FxWHLa5R4s8l7XYSB/nmQKExlE1FhjLl7/6eXbys3yDXhzFfthcNwJuVrFxvwq4Ryig6QYyKE9Wiy9zWL7SYz9FFWvd3aySDs3/wQZ916kYDs/Zw96yBNeev5tcIdcTAxDR3k4j78QXQO90t2syVja4xRpnCalMUF8hRmKKKSQ1ME08ezFDPOaYyPNmaj3gKGE5iGp4FVxjc2IPc4lBmSwmHVQrLqwMFH7cvE4eYgn4TwUEMWqf4ilTOzqZdYKIm6s7QMDlIg0BMXK8a0cTB6+M1fMSWlgFNW3IywpqjTjfcNTJCzAunB7Qy7ghRcBZupSNynyQOMPBJ6WCnuGLEcbPBeAzBTdfITlsj5e3vDj0vh8Nn3uHMLJkJ4GBdcAxhNPTF+pEZ8BDrmAzzgPpqXDjEfzDoLhDEwgfpu93qTLxutpHOBa4Okn/CtxSqohpGlRYTjDrDbID3nNXuzXfc7ecazXwf7UZXgJEsm9VjdcQ31JT+vAYsNrWDUVj5To59bywSj7z/u+fQjWdY9dFUyJFrslkXRbWZ8WaDq3b0FMfjPTC+TQG3uCdNNU0uJgyawY+g3TFMNuMdI="
  # Ex. travis encrypt -r org/repo SONATYPE_PASSWORD=your_sonatype_password
  - secure: "rtw3FONoh9iXgQNlzL6RA977IWhL3138zop6lECSIqB+Kzck7rs4epf8bVmg8U3PbOXK1oQOubDKuhwtpyRHgkP17EAmqCnbpB8+YlfRqTUmqmT4MQ0e4TsAO6QxVZjulFLbAtGQXsvX0ilkBAZQpmXrWVtTCPzhP3puCSbjCVg2QJDlbD3/1fa3mpu3zPJaFXoT4x9i0dMWzaJnAOFytajzUBSvUBEdgKrEZHnqDQxBWWl/EMh+PxYFN+mNm/0kiHadl4ptSDSIDizHofdwF99Qnd1auh660n0kkESSgRoLsRBj3hmwPTJPzayYnpwd+AYOsWvC/2ivqVbhXyOTzDAjc9Yhl2HWn2hgtLEGrc5FUFQN1aKV/H/ahgKOw4lLOy4L1JzOrgKR3qICgUfnypsnZiB6nil+l/upvARm8m1mDrc0gaAZ4QwomjmF4pk6IagWzoNmbpqx38KK5TSio6PhWY+eU1ytDDAc/MBN3eHdTCsEZSmmCmxK3TcM+cXqdw0f0p1UX/0kw/3gM4Hnzau0L+heeI/hTB0+zY6KZYmkZ4OmtlL4o7kLMJ9M1FlZVlJUUmVG7/07DTqdTRAybvyHpJoWBKxnfyfA3/9cs2Lpi0fTwn8xqth81/RPX3Cjqql4m6QUbnl63wGGgPTeZ+eRIUlKTN9EZy4hdE285q0="
