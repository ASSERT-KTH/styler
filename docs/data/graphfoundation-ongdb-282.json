{
    "project_name": "graphfoundation-ongdb",
    "error_id": "282",
    "information": {
        "errors": [
            {
                "line": "1",
                "severity": "error",
                "message": "Missing, wrong or duplicated license header",
                "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
            }
        ]
    },
    "source_code": "/*\n * Copyright (c) 2002-2020 \"Neo4j,\"\n * Neo4j Sweden AB [http://neo4j.com]\n *",
    "results": [
        {
            "tool": "styler",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        },
        {
            "tool": "intellij",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                },
                {
                    "line": "53",
                    "column": "41",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "55",
                    "column": "75",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "69",
                    "column": "10",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "69",
                    "column": "27",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "73",
                    "column": "5",
                    "severity": "error",
                    "message": "'}' at column 5 should be alone on a line.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.blocks.RightCurlyCheck"
                },
                {
                    "line": "80",
                    "column": "31",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "80",
                    "column": "39",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "86",
                    "column": "31",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "86",
                    "column": "39",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "92",
                    "column": "39",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "92",
                    "column": "87",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "99",
                    "column": "39",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "99",
                    "column": "47",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "106",
                    "column": "39",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "107",
                    "column": "100",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "109",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "109",
                    "column": "29",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "113",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "113",
                    "column": "29",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "118",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "118",
                    "column": "27",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "126",
                    "column": "38",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "127",
                    "column": "99",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "129",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "129",
                    "column": "29",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "133",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "133",
                    "column": "29",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "138",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "138",
                    "column": "27",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "146",
                    "column": "40",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "147",
                    "column": "66",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "149",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "149",
                    "column": "29",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "153",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "153",
                    "column": "29",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "158",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "158",
                    "column": "27",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "166",
                    "column": "36",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "166",
                    "column": "98",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "169",
                    "column": "9",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "169",
                    "column": "33",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "173",
                    "column": "9",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "173",
                    "column": "31",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "180",
                    "column": "30",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "180",
                    "column": "103",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "182",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "182",
                    "column": "35",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "186",
                    "column": "5",
                    "severity": "error",
                    "message": "'}' at column 5 should be alone on a line.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.blocks.RightCurlyCheck"
                },
                {
                    "line": "186",
                    "column": "15",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "186",
                    "column": "67",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "189",
                    "column": "41",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "189",
                    "column": "131",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "197",
                    "column": "32",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "197",
                    "column": "60",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "200",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "200",
                    "column": "21",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "207",
                    "column": "35",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "207",
                    "column": "67",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "212",
                    "column": "12",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "212",
                    "column": "30",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "228",
                    "column": "40",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "228",
                    "column": "69",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "232",
                    "column": "46",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "232",
                    "column": "113",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "240",
                    "column": "43",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "240",
                    "column": "107",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "250",
                    "column": "37",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "250",
                    "column": "69",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "256",
                    "column": "5",
                    "severity": "error",
                    "message": "'}' at column 5 should be alone on a line.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.blocks.RightCurlyCheck"
                },
                {
                    "line": "256",
                    "column": "13",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "256",
                    "column": "43",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "260",
                    "column": "56",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "261",
                    "column": "5",
                    "severity": "error",
                    "message": "'}' at column 5 should be alone on a line.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.blocks.RightCurlyCheck"
                },
                {
                    "line": "261",
                    "column": "13",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "261",
                    "column": "44",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "263",
                    "column": "38",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "263",
                    "column": "101",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "265",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "265",
                    "column": "40",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "273",
                    "column": "37",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "273",
                    "column": "57",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "279",
                    "column": "43",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "279",
                    "column": "63",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "285",
                    "column": "48",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "285",
                    "column": "68",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                }
            ],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/errored/1/282/TransactionToRecordStateVisitor.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/intellij/282/TransactionToRecordStateVisitor.java\nindex 488137e515b..21d0e52147d 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/errored/1/282/TransactionToRecordStateVisitor.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/intellij/282/TransactionToRecordStateVisitor.java\n@@ -17,6 +17,7 @@\n  * You should have received a copy of the GNU General Public License\n  * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  */\n+\n package org.neo4j.kernel.impl.storageengine.impl.recordstorage;\n \n import java.util.Iterator;\n@@ -42,252 +43,248 @@ import org.neo4j.storageengine.api.txstate.TxStateVisitor;\n \n public class TransactionToRecordStateVisitor extends TxStateVisitor.Adapter\n {\n-    private boolean clearSchemaState;\n-    private final TransactionRecordState recordState;\n-    private final SchemaState schemaState;\n-    private final SchemaStorage schemaStorage;\n-    private final ConstraintSemantics constraintSemantics;\n-    private final IndexProviderMap indexProviderMap;\n+  private boolean clearSchemaState;\n+  private final TransactionRecordState recordState;\n+  private final SchemaState schemaState;\n+  private final SchemaStorage schemaStorage;\n+  private final ConstraintSemantics constraintSemantics;\n+  private final IndexProviderMap indexProviderMap;\n+\n+  public TransactionToRecordStateVisitor(TransactionRecordState recordState, SchemaState schemaState,\n+                                         SchemaStorage schemaStorage, ConstraintSemantics constraintSemantics,\n+                                         IndexProviderMap indexProviderMap)\n+  {\n+    this.recordState = recordState;\n+    this.schemaState = schemaState;\n+    this.schemaStorage = schemaStorage;\n+    this.constraintSemantics = constraintSemantics;\n+    this.indexProviderMap = indexProviderMap;\n+  }\n \n-    public TransactionToRecordStateVisitor( TransactionRecordState recordState, SchemaState schemaState,\n-                                            SchemaStorage schemaStorage, ConstraintSemantics constraintSemantics,\n-                                            IndexProviderMap indexProviderMap )\n+  @Override\n+  public void close()\n+  {\n+    try\n+    {\n+      if (clearSchemaState)\n+      {\n+        schemaState.clear();\n+      }\n+    } finally\n     {\n-        this.recordState = recordState;\n-        this.schemaState = schemaState;\n-        this.schemaStorage = schemaStorage;\n-        this.constraintSemantics = constraintSemantics;\n-        this.indexProviderMap = indexProviderMap;\n+      clearSchemaState = false;\n     }\n+  }\n+\n+  @Override\n+  public void visitCreatedNode(long id)\n+  {\n+    recordState.nodeCreate(id);\n+  }\n+\n+  @Override\n+  public void visitDeletedNode(long id)\n+  {\n+    recordState.nodeDelete(id);\n+  }\n \n-    @Override\n-    public void close()\n+  @Override\n+  public void visitCreatedRelationship(long id, int type, long startNode, long endNode)\n+  {\n+    // record the state changes to be made to the store\n+    recordState.relCreate(id, type, startNode, endNode);\n+  }\n+\n+  @Override\n+  public void visitDeletedRelationship(long id)\n+  {\n+    // record the state changes to be made to the store\n+    recordState.relDelete(id);\n+  }\n+\n+  @Override\n+  public void visitNodePropertyChanges(long id, Iterator<StorageProperty> added,\n+                                       Iterator<StorageProperty> changed, Iterator<Integer> removed)\n+  {\n+    while (removed.hasNext())\n     {\n-        try\n-        {\n-            if ( clearSchemaState )\n-            {\n-                schemaState.clear();\n-            }\n-        }\n-        finally\n-        {\n-            clearSchemaState = false;\n-        }\n+      recordState.nodeRemoveProperty(id, removed.next());\n     }\n-\n-    @Override\n-    public void visitCreatedNode( long id )\n+    while (changed.hasNext())\n     {\n-        recordState.nodeCreate( id );\n+      StorageProperty prop = changed.next();\n+      recordState.nodeChangeProperty(id, prop.propertyKeyId(), prop.value());\n     }\n-\n-    @Override\n-    public void visitDeletedNode( long id )\n+    while (added.hasNext())\n     {\n-        recordState.nodeDelete( id );\n+      StorageProperty prop = added.next();\n+      recordState.nodeAddProperty(id, prop.propertyKeyId(), prop.value());\n     }\n+  }\n \n-    @Override\n-    public void visitCreatedRelationship( long id, int type, long startNode, long endNode )\n+  @Override\n+  public void visitRelPropertyChanges(long id, Iterator<StorageProperty> added,\n+                                      Iterator<StorageProperty> changed, Iterator<Integer> removed)\n+  {\n+    while (removed.hasNext())\n     {\n-        // record the state changes to be made to the store\n-        recordState.relCreate( id, type, startNode, endNode );\n+      recordState.relRemoveProperty(id, removed.next());\n     }\n-\n-    @Override\n-    public void visitDeletedRelationship( long id )\n+    while (changed.hasNext())\n     {\n-        // record the state changes to be made to the store\n-        recordState.relDelete( id );\n+      StorageProperty prop = changed.next();\n+      recordState.relChangeProperty(id, prop.propertyKeyId(), prop.value());\n     }\n-\n-    @Override\n-    public void visitNodePropertyChanges( long id, Iterator<StorageProperty> added,\n-            Iterator<StorageProperty> changed, Iterator<Integer> removed )\n+    while (added.hasNext())\n     {\n-        while ( removed.hasNext() )\n-        {\n-            recordState.nodeRemoveProperty( id, removed.next() );\n-        }\n-        while ( changed.hasNext() )\n-        {\n-            StorageProperty prop = changed.next();\n-            recordState.nodeChangeProperty( id, prop.propertyKeyId(), prop.value() );\n-        }\n-        while ( added.hasNext() )\n-        {\n-            StorageProperty prop = added.next();\n-            recordState.nodeAddProperty( id, prop.propertyKeyId(), prop.value() );\n-        }\n+      StorageProperty prop = added.next();\n+      recordState.relAddProperty(id, prop.propertyKeyId(), prop.value());\n     }\n+  }\n \n-    @Override\n-    public void visitRelPropertyChanges( long id, Iterator<StorageProperty> added,\n-            Iterator<StorageProperty> changed, Iterator<Integer> removed )\n+  @Override\n+  public void visitGraphPropertyChanges(Iterator<StorageProperty> added, Iterator<StorageProperty> changed,\n+                                        Iterator<Integer> removed)\n+  {\n+    while (removed.hasNext())\n     {\n-        while ( removed.hasNext() )\n-        {\n-            recordState.relRemoveProperty( id, removed.next() );\n-        }\n-        while ( changed.hasNext() )\n-        {\n-            StorageProperty prop = changed.next();\n-            recordState.relChangeProperty( id, prop.propertyKeyId(), prop.value() );\n-        }\n-        while ( added.hasNext() )\n-        {\n-            StorageProperty prop = added.next();\n-            recordState.relAddProperty( id, prop.propertyKeyId(), prop.value() );\n-        }\n+      recordState.graphRemoveProperty(removed.next());\n     }\n-\n-    @Override\n-    public void visitGraphPropertyChanges( Iterator<StorageProperty> added, Iterator<StorageProperty> changed,\n-            Iterator<Integer> removed )\n+    while (changed.hasNext())\n     {\n-        while ( removed.hasNext() )\n-        {\n-            recordState.graphRemoveProperty( removed.next() );\n-        }\n-        while ( changed.hasNext() )\n-        {\n-            StorageProperty prop = changed.next();\n-            recordState.graphChangeProperty( prop.propertyKeyId(), prop.value() );\n-        }\n-        while ( added.hasNext() )\n-        {\n-            StorageProperty prop = added.next();\n-            recordState.graphAddProperty( prop.propertyKeyId(), prop.value() );\n-        }\n+      StorageProperty prop = changed.next();\n+      recordState.graphChangeProperty(prop.propertyKeyId(), prop.value());\n     }\n-\n-    @Override\n-    public void visitNodeLabelChanges( long id, final Set<Integer> added, final Set<Integer> removed )\n+    while (added.hasNext())\n     {\n-        // record the state changes to be made to the store\n-        for ( Integer label : removed )\n-        {\n-            recordState.removeLabelFromNode( label, id );\n-        }\n-        for ( Integer label : added )\n-        {\n-            recordState.addLabelToNode( label, id );\n-        }\n+      StorageProperty prop = added.next();\n+      recordState.graphAddProperty(prop.propertyKeyId(), prop.value());\n     }\n+  }\n \n-    @Override\n-    public void visitAddedIndex( SchemaIndexDescriptor index, IndexProvider.Descriptor providerDescriptor )\n+  @Override\n+  public void visitNodeLabelChanges(long id, final Set<Integer> added, final Set<Integer> removed)\n+  {\n+    // record the state changes to be made to the store\n+    for (Integer label : removed)\n     {\n-        if ( providerDescriptor == null )\n-        {\n-            // No specific provider descriptor, use the default\n-            providerDescriptor = indexProviderMap.getDefaultProvider().getProviderDescriptor();\n-        }\n-        else if ( indexProviderMap.lookup( providerDescriptor ) == null )\n-        {\n-            // A specific provider descriptor, verify that it exists\n-            throw new IllegalArgumentException( \"Specified non-existent provider '\" + providerDescriptor + \"' for created index \" + index );\n-        }\n-\n-        IndexRule rule = IndexRule.indexRule( schemaStorage.newRuleId(), index, providerDescriptor );\n-        recordState.createSchemaRule( rule );\n+      recordState.removeLabelFromNode(label, id);\n+    }\n+    for (Integer label : added)\n+    {\n+      recordState.addLabelToNode(label, id);\n     }\n+  }\n \n-    @Override\n-    public void visitRemovedIndex( SchemaIndexDescriptor index )\n+  @Override\n+  public void visitAddedIndex(SchemaIndexDescriptor index, IndexProvider.Descriptor providerDescriptor)\n+  {\n+    if (providerDescriptor == null)\n+    {\n+      // No specific provider descriptor, use the default\n+      providerDescriptor = indexProviderMap.getDefaultProvider().getProviderDescriptor();\n+    } else if (indexProviderMap.lookup(providerDescriptor) == null)\n     {\n-        IndexRule rule = schemaStorage.indexGetForSchema( index );\n-        if ( rule != null )\n-        {\n-            recordState.dropSchemaRule( rule );\n-        }\n+      // A specific provider descriptor, verify that it exists\n+      throw new IllegalArgumentException(\"Specified non-existent provider '\" + providerDescriptor + \"' for created index \" + index);\n     }\n \n-    @Override\n-    public void visitAddedConstraint( ConstraintDescriptor constraint ) throws CreateConstraintFailureException\n+    IndexRule rule = IndexRule.indexRule(schemaStorage.newRuleId(), index, providerDescriptor);\n+    recordState.createSchemaRule(rule);\n+  }\n+\n+  @Override\n+  public void visitRemovedIndex(SchemaIndexDescriptor index)\n+  {\n+    IndexRule rule = schemaStorage.indexGetForSchema(index);\n+    if (rule != null)\n     {\n-        clearSchemaState = true;\n-        long constraintId = schemaStorage.newRuleId();\n+      recordState.dropSchemaRule(rule);\n+    }\n+  }\n \n-        switch ( constraint.type() )\n-        {\n-        case UNIQUE:\n-            visitAddedUniquenessConstraint( (UniquenessConstraintDescriptor) constraint, constraintId );\n-            break;\n+  @Override\n+  public void visitAddedConstraint(ConstraintDescriptor constraint) throws CreateConstraintFailureException\n+  {\n+    clearSchemaState = true;\n+    long constraintId = schemaStorage.newRuleId();\n \n-        case UNIQUE_EXISTS:\n-            visitAddedNodeKeyConstraint( (NodeKeyConstraintDescriptor) constraint, constraintId );\n-            break;\n+    switch (constraint.type())\n+    {\n+      case UNIQUE:\n+        visitAddedUniquenessConstraint((UniquenessConstraintDescriptor) constraint, constraintId);\n+        break;\n \n-        case EXISTS:\n-            recordState.createSchemaRule(\n-                    constraintSemantics.createExistenceConstraint( schemaStorage.newRuleId(), constraint ) );\n-            break;\n+      case UNIQUE_EXISTS:\n+        visitAddedNodeKeyConstraint((NodeKeyConstraintDescriptor) constraint, constraintId);\n+        break;\n \n-        default:\n-            throw new IllegalStateException( constraint.type().toString() );\n-        }\n-    }\n+      case EXISTS:\n+        recordState.createSchemaRule(\n+            constraintSemantics.createExistenceConstraint(schemaStorage.newRuleId(), constraint));\n+        break;\n \n-    private void visitAddedUniquenessConstraint( UniquenessConstraintDescriptor uniqueConstraint, long constraintId )\n-    {\n-        IndexRule indexRule = schemaStorage.indexGetForSchema( uniqueConstraint.ownedIndexDescriptor() );\n-        recordState.createSchemaRule( constraintSemantics.createUniquenessConstraintRule(\n-                constraintId, uniqueConstraint, indexRule.getId() ) );\n-        recordState.setConstraintIndexOwner( indexRule, constraintId );\n+      default:\n+        throw new IllegalStateException(constraint.type().toString());\n     }\n+  }\n \n-    private void visitAddedNodeKeyConstraint( NodeKeyConstraintDescriptor uniqueConstraint, long constraintId )\n-            throws CreateConstraintFailureException\n-    {\n-        IndexRule indexRule = schemaStorage.indexGetForSchema( uniqueConstraint.ownedIndexDescriptor() );\n-        recordState.createSchemaRule( constraintSemantics.createNodeKeyConstraintRule(\n-                constraintId, uniqueConstraint, indexRule.getId() ) );\n-        recordState.setConstraintIndexOwner( indexRule, constraintId );\n-    }\n+  private void visitAddedUniquenessConstraint(UniquenessConstraintDescriptor uniqueConstraint, long constraintId)\n+  {\n+    IndexRule indexRule = schemaStorage.indexGetForSchema(uniqueConstraint.ownedIndexDescriptor());\n+    recordState.createSchemaRule(constraintSemantics.createUniquenessConstraintRule(\n+        constraintId, uniqueConstraint, indexRule.getId()));\n+    recordState.setConstraintIndexOwner(indexRule, constraintId);\n+  }\n \n-    @Override\n-    public void visitRemovedConstraint( ConstraintDescriptor constraint )\n-    {\n-        clearSchemaState = true;\n-        try\n-        {\n-            recordState.dropSchemaRule( schemaStorage.constraintsGetSingle( constraint ) );\n-        }\n-        catch ( SchemaRuleNotFoundException e )\n-        {\n-            throw new IllegalStateException(\n-                    \"Constraint to be removed should exist, since its existence should have been validated earlier \" +\n-                            \"and the schema should have been locked.\" );\n-        }\n-        catch ( DuplicateSchemaRuleException e )\n-        {\n-            throw new IllegalStateException( \"Multiple constraints found for specified label and property.\" );\n-        }\n-        if ( constraint.enforcesUniqueness() )\n-        {\n-            // Remove the index for the constraint as well\n-            visitRemovedIndex( ((IndexBackedConstraintDescriptor)constraint).ownedIndexDescriptor() );\n-        }\n-    }\n+  private void visitAddedNodeKeyConstraint(NodeKeyConstraintDescriptor uniqueConstraint, long constraintId)\n+      throws CreateConstraintFailureException\n+  {\n+    IndexRule indexRule = schemaStorage.indexGetForSchema(uniqueConstraint.ownedIndexDescriptor());\n+    recordState.createSchemaRule(constraintSemantics.createNodeKeyConstraintRule(\n+        constraintId, uniqueConstraint, indexRule.getId()));\n+    recordState.setConstraintIndexOwner(indexRule, constraintId);\n+  }\n \n-    @Override\n-    public void visitCreatedLabelToken( String name, int id )\n+  @Override\n+  public void visitRemovedConstraint(ConstraintDescriptor constraint)\n+  {\n+    clearSchemaState = true;\n+    try\n     {\n-        recordState.createLabelToken( name, id );\n-    }\n-\n-    @Override\n-    public void visitCreatedPropertyKeyToken( String name, int id )\n+      recordState.dropSchemaRule(schemaStorage.constraintsGetSingle(constraint));\n+    } catch (SchemaRuleNotFoundException e)\n+    {\n+      throw new IllegalStateException(\n+          \"Constraint to be removed should exist, since its existence should have been validated earlier \" +\n+              \"and the schema should have been locked.\");\n+    } catch (DuplicateSchemaRuleException e)\n     {\n-        recordState.createPropertyKeyToken( name, id );\n+      throw new IllegalStateException(\"Multiple constraints found for specified label and property.\");\n     }\n-\n-    @Override\n-    public void visitCreatedRelationshipTypeToken( String name, int id )\n+    if (constraint.enforcesUniqueness())\n     {\n-        recordState.createRelationshipTypeToken( name, id );\n+      // Remove the index for the constraint as well\n+      visitRemovedIndex(((IndexBackedConstraintDescriptor) constraint).ownedIndexDescriptor());\n     }\n+  }\n+\n+  @Override\n+  public void visitCreatedLabelToken(String name, int id)\n+  {\n+    recordState.createLabelToken(name, id);\n+  }\n+\n+  @Override\n+  public void visitCreatedPropertyKeyToken(String name, int id)\n+  {\n+    recordState.createPropertyKeyToken(name, id);\n+  }\n+\n+  @Override\n+  public void visitCreatedRelationshipTypeToken(String name, int id)\n+  {\n+    recordState.createRelationshipTypeToken(name, id);\n+  }\n \n }\n",
            "diff_size": 306
        },
        {
            "tool": "naturalize",
            "errors": null,
            "diff": null
        },
        {
            "tool": "codebuff",
            "errors": null,
            "diff": null
        },
        {
            "tool": "styler_random",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        },
        {
            "tool": "styler_three_grams",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        }
    ],
    "repaired_by": [],
    "not_repaired_by": [
        "styler",
        "intellij",
        "naturalize",
        "codebuff",
        "styler_random",
        "styler_three_grams"
    ]
}