{
    "project_name": "CESNET-perun",
    "error_id": "496",
    "information": {
        "errors": [
            {
                "line": "82",
                "severity": "error",
                "message": "Line matches the illegal pattern 'Wrong number of tabs before space on next line. Indent must use tab characters.'.",
                "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpCheck"
            }
        ]
    },
    "source_code": "\n\t\t// sending data\n\t\tJsonPostClient jspc = new JsonPostClient(newEvents);\n        // to allow own error handling for attributes errors.\n        jspc.setHidden(true);\n\t\tjspc.sendData(JSON_URL, prepareJSONObject());",
    "results": [
        {
            "tool": "styler",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/styler/496/AssignGroupToResources.java\nindex a5b7c5d4c29..63d555f1f20 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/styler/496/AssignGroupToResources.java\n@@ -80,7 +80,7 @@ public class AssignGroupToResources {\n \n \t\t// sending data\n \t\tJsonPostClient jspc = new JsonPostClient(newEvents);\n-        // to allow own error handling for attributes errors.\n+// to allow own error handling for attributes errors.\n         jspc.setHidden(true);\n \t\tjspc.sendData(JSON_URL, prepareJSONObject());\n \n",
            "diff_size": 1
        },
        {
            "tool": "intellij",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/intellij/496/AssignGroupToResources.java\nindex a5b7c5d4c29..0c1489b996c 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/intellij/496/AssignGroupToResources.java\n@@ -20,216 +20,223 @@ import java.util.ArrayList;\n  */\n public class AssignGroupToResources {\n \n-\t// web session\n-\tprivate PerunWebSession session = PerunWebSession.getInstance();\n-\t// URL to call\n-\tfinal String JSON_URL = \"resourcesManager/assignGroupToResources\";\n-\t// external events\n-\tprivate JsonCallbackEvents events = new JsonCallbackEvents();\n-\t// ids\n-\tprivate Group group;\n-\tprivate ArrayList<RichResource> resources;\n-\n-\t/**\n-\t * Creates a new request\n-\t */\n-\tpublic AssignGroupToResources() {}\n-\n-\t/**\n-\t * Creates a new request with custom events passed from tab or page\n-\t *\n-\t * @param events external events\n-\t */\n-\tpublic AssignGroupToResources(final JsonCallbackEvents events) {\n-\t\tthis.events = events;\n-\t}\n-\n-\t/**\n-\t * Attempts to assign group to resources\n-\t *\n-\t * @param group group which should be assigned\n-\t * @param resources resources where group should be assigned\n-\t */\n-\tpublic void assignGroupToResources(final Group group, final ArrayList<RichResource> resources) {\n-\n-\t\tthis.group = group;\n-\t\tthis.resources = resources;\n-\n-\t\t// test arguments\n-\t\tif(!this.testAssigning()){\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t// new events\n-\t\tJsonCallbackEvents newEvents = new JsonCallbackEvents(){\n-\t\t\tpublic void onError(PerunError error) {\n-\t\t\t\tsession.getUiElements().setLogErrorText(\"Assigning group: \" + group.getShortName() + \" failed.\");\n-\t\t\t\thandleCommonExceptions(error, group);\n-\t\t\t\tevents.onError(error);\n-\t\t\t};\n-\n-\t\t\tpublic void onFinished(JavaScriptObject jso) {\n-\t\t\t\tsession.getUiElements().setLogSuccessText(\"Group: \"+group.getShortName()+\" was successfully assigned to resources.\");\n-\t\t\t\tevents.onFinished(jso);\n-\t\t\t};\n-\n-\t\t\tpublic void onLoadingStart() {\n-\t\t\t\tevents.onLoadingStart();\n-\t\t\t};\n-\t\t};\n-\n-\t\t// sending data\n-\t\tJsonPostClient jspc = new JsonPostClient(newEvents);\n+    // web session\n+    private PerunWebSession session = PerunWebSession.getInstance();\n+    // URL to call\n+    final String JSON_URL = \"resourcesManager/assignGroupToResources\";\n+    // external events\n+    private JsonCallbackEvents events = new JsonCallbackEvents();\n+    // ids\n+    private Group group;\n+    private ArrayList<RichResource> resources;\n+\n+    /**\n+     * Creates a new request\n+     */\n+    public AssignGroupToResources() {\n+    }\n+\n+    /**\n+     * Creates a new request with custom events passed from tab or page\n+     *\n+     * @param events external events\n+     */\n+    public AssignGroupToResources(final JsonCallbackEvents events) {\n+        this.events = events;\n+    }\n+\n+    /**\n+     * Attempts to assign group to resources\n+     *\n+     * @param group     group which should be assigned\n+     * @param resources resources where group should be assigned\n+     */\n+    public void assignGroupToResources(final Group group, final ArrayList<RichResource> resources) {\n+\n+        this.group = group;\n+        this.resources = resources;\n+\n+        // test arguments\n+        if (!this.testAssigning()) {\n+            return;\n+        }\n+\n+        // new events\n+        JsonCallbackEvents newEvents = new JsonCallbackEvents() {\n+            public void onError(PerunError error) {\n+                session.getUiElements().setLogErrorText(\"Assigning group: \" + group.getShortName() + \" failed.\");\n+                handleCommonExceptions(error, group);\n+                events.onError(error);\n+            }\n+\n+            ;\n+\n+            public void onFinished(JavaScriptObject jso) {\n+                session.getUiElements().setLogSuccessText(\"Group: \" + group.getShortName() + \" was successfully assigned to resources.\");\n+                events.onFinished(jso);\n+            }\n+\n+            ;\n+\n+            public void onLoadingStart() {\n+                events.onLoadingStart();\n+            }\n+\n+            ;\n+        };\n+\n+        // sending data\n+        JsonPostClient jspc = new JsonPostClient(newEvents);\n         // to allow own error handling for attributes errors.\n         jspc.setHidden(true);\n-\t\tjspc.sendData(JSON_URL, prepareJSONObject());\n-\n-\t}\n-\n-\t/**\n-\t * Tests the values, if the process can continue\n-\t *\n-\t * @return true/false for continue/stop\n-\t */\n-\tprivate boolean testAssigning() {\n+        jspc.sendData(JSON_URL, prepareJSONObject());\n+\n+    }\n+\n+    /**\n+     * Tests the values, if the process can continue\n+     *\n+     * @return true/false for continue/stop\n+     */\n+    private boolean testAssigning() {\n \n-\t\tboolean result = true;\n-\t\tString errorMsg = \"\";\n+        boolean result = true;\n+        String errorMsg = \"\";\n \n-\t\tif(resources == null || resources.isEmpty()){\n-\t\t\terrorMsg += \"Wrong parameter <strong>Resources</strong>.<br />\";\n-\t\t\tresult = false;\n-\t\t}\n+        if (resources == null || resources.isEmpty()) {\n+            errorMsg += \"Wrong parameter <strong>Resources</strong>.<br />\";\n+            result = false;\n+        }\n \n-\t\tif(group == null){\n-\t\t\terrorMsg += \"Wrong parameter <strong>group</strong>.\";\n-\t\t\tresult = false;\n-\t\t}\n+        if (group == null) {\n+            errorMsg += \"Wrong parameter <strong>group</strong>.\";\n+            result = false;\n+        }\n \n-\t\tif(errorMsg.length()>0){\n-\t\t\tUiElements.generateAlert(\"Parameter error\", errorMsg);\n-\t\t}\n+        if (errorMsg.length() > 0) {\n+            UiElements.generateAlert(\"Parameter error\", errorMsg);\n+        }\n \n-\t\treturn result;\n-\t}\n+        return result;\n+    }\n \n-\t/**\n-\t * Prepares a JSON object\n-\t *\n-\t * @return JSONObject the whole query\n-\t */\n-\tprivate JSONObject prepareJSONObject() {\n+    /**\n+     * Prepares a JSON object\n+     *\n+     * @return JSONObject the whole query\n+     */\n+    private JSONObject prepareJSONObject() {\n \n-\t\tJSONObject jsonQuery = new JSONObject();\n+        JSONObject jsonQuery = new JSONObject();\n \n-\t\tJSONArray array = new JSONArray();\n-\t\tfor (int i=0; i< resources.size(); i++) {\n-\t\t\tarray.set(i, new JSONNumber(resources.get(i).getId()));\n-\t\t}\n-\t\tjsonQuery.put(\"resources\", array);\n-\t\tjsonQuery.put(\"group\", new JSONNumber(group.getId()));\n+        JSONArray array = new JSONArray();\n+        for (int i = 0; i < resources.size(); i++) {\n+            array.set(i, new JSONNumber(resources.get(i).getId()));\n+        }\n+        jsonQuery.put(\"resources\", array);\n+        jsonQuery.put(\"group\", new JSONNumber(group.getId()));\n \n-\t\treturn jsonQuery;\n-\t}\n+        return jsonQuery;\n+    }\n \n-\t/**\n-\t * Handle common exceptions caused by this callback.\n-\t *\n-\t * @param error     PerunError returned from Perun\n-\t * @param group  related group\n-\t */\n-\tprivate void handleCommonExceptions(PerunError error, Group group) {\n+    /**\n+     * Handle common exceptions caused by this callback.\n+     *\n+     * @param error PerunError returned from Perun\n+     * @param group related group\n+     */\n+    private void handleCommonExceptions(PerunError error, Group group) {\n \n-\t\tif (error != null) {\n+        if (error != null) {\n \n-\t\t\tif (\"WrongAttributeValueException\".equals(error.getName())) {\n+            if (\"WrongAttributeValueException\".equals(error.getName())) {\n \n-\t\t\t\tAttribute a = error.getAttribute();\n-\t\t\t\tGeneralObject holder = error.getAttributeHolder();\n-\t\t\t\tGeneralObject secondHolder = error.getAttributeHolderSecondary();\n+                Attribute a = error.getAttribute();\n+                GeneralObject holder = error.getAttributeHolder();\n+                GeneralObject secondHolder = error.getAttributeHolderSecondary();\n \n-\t\t\t\tString text = \"Group \"+group.getShortName()+\" can't be assigned to one of resources.\";\n+                String text = \"Group \" + group.getShortName() + \" can't be assigned to one of resources.\";\n \n-\t\t\t\tif (a != null) {\n+                if (a != null) {\n \n-\t\t\t\t\tif (a.getValue().equals(\"null\")) {\n-\t\t\t\t\t\ttext += \"<p>Following setting is missing, but it's required by services on resource.\";\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\ttext += \"<p>Following setting, required by services on resource, is wrong.\";\n-\t\t\t\t\t}\n+                    if (a.getValue().equals(\"null\")) {\n+                        text += \"<p>Following setting is missing, but it's required by services on resource.\";\n+                    } else {\n+                        text += \"<p>Following setting, required by services on resource, is wrong.\";\n+                    }\n \n-\t\t\t\t\tString attrName = a.getDisplayName();\n-\t\t\t\t\tString attrValue = a.getValue();\n-\t\t\t\t\ttext += \"<p><strong>Setting:&nbsp;</strong>\" + attrName + \"<br />\";\n+                    String attrName = a.getDisplayName();\n+                    String attrValue = a.getValue();\n+                    text += \"<p><strong>Setting:&nbsp;</strong>\" + attrName + \"<br />\";\n \n-\t\t\t\t\tif (holder != null) {\n-\t\t\t\t\t\tif (!holder.getName().equalsIgnoreCase(\"undefined\")) {\n-\t\t\t\t\t\t\ttext += \"<strong>\" + holder.getObjectType() + \":</strong>&nbsp;\" + holder.getName() + \"<br />\";\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tif (secondHolder != null) {\n-\t\t\t\t\t\tif (!secondHolder.getName().equalsIgnoreCase(\"undefined\")) {\n-\t\t\t\t\t\t\ttext += \"<strong>\" + secondHolder.getObjectType() + \":</strong>&nbsp;\" + secondHolder.getName() + \"<br />\";\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n+                    if (holder != null) {\n+                        if (!holder.getName().equalsIgnoreCase(\"undefined\")) {\n+                            text += \"<strong>\" + holder.getObjectType() + \":</strong>&nbsp;\" + holder.getName() + \"<br />\";\n+                        }\n+                    }\n+                    if (secondHolder != null) {\n+                        if (!secondHolder.getName().equalsIgnoreCase(\"undefined\")) {\n+                            text += \"<strong>\" + secondHolder.getObjectType() + \":</strong>&nbsp;\" + secondHolder.getName() + \"<br />\";\n+                        }\n+                    }\n \n-\t\t\t\t\tif (!a.getValue().equals(\"null\")) {\n-\t\t\t\t\t\ttext += \"<strong>Value:&nbsp;</strong>\" + attrValue;\n-\t\t\t\t\t}\n+                    if (!a.getValue().equals(\"null\")) {\n+                        text += \"<strong>Value:&nbsp;</strong>\" + attrValue;\n+                    }\n \n-\t\t\t\t\ttext += \"<p>Please fix the issue before assigning group to resource on group's settings page.\";\n+                    text += \"<p>Please fix the issue before assigning group to resource on group's settings page.\";\n \n-\t\t\t\t} else {\n-\t\t\t\t\ttext += \"<p><i>Attribute is null, please report this error.</i>\";\n-\t\t\t\t}\n+                } else {\n+                    text += \"<p><i>Attribute is null, please report this error.</i>\";\n+                }\n \n-\t\t\t\tUiElements.generateError(error, \"Wrong settings\", text);\n+                UiElements.generateError(error, \"Wrong settings\", text);\n \n-\t\t\t} else if (\"GroupAlreadyAssignedException\".equals(error.getName())) {\n+            } else if (\"GroupAlreadyAssignedException\".equals(error.getName())) {\n \n-\t\t\t\tUiElements.generateError(error, \"Already assigned\", \"Group is already assigned to one of resources.\");\n+                UiElements.generateError(error, \"Already assigned\", \"Group is already assigned to one of resources.\");\n \n-\t\t\t} else if (\"WrongReferenceAttributeValueException\".equals(error.getName())) {\n+            } else if (\"WrongReferenceAttributeValueException\".equals(error.getName())) {\n \n-\t\t\t\tString text = \"Group \"+group.getShortName()+\" can't be assigned to one of resources.\";\n+                String text = \"Group \" + group.getShortName() + \" can't be assigned to one of resources.\";\n \n-\t\t\t\ttext += \"<p>Following combination of settings is not correct:\";\n+                text += \"<p>Following combination of settings is not correct:\";\n \n-\t\t\t\tAttribute a = error.getAttribute();\n-\t\t\t\tAttribute a2 = error.getReferenceAttribute();\n+                Attribute a = error.getAttribute();\n+                Attribute a2 = error.getReferenceAttribute();\n \n-\t\t\t\tif (a != null) {\n-\t\t\t\t\tString attrName = a.getDisplayName();\n-\t\t\t\t\tString attrValue = a.getValue();\n-\t\t\t\t\tString entity = a.getEntity();\n-\t\t\t\t\ttext += \"<p><strong>Setting&nbsp;1:</strong>&nbsp;\" + attrName + \" (\" + entity + \")\";\n-\t\t\t\t\ttext += \"<br/><strong>Value&nbsp;1:</strong>&nbsp;\" + attrValue;\n-\t\t\t\t} else {\n-\t\t\t\t\ttext += \"<p><i>Setting 1 is null or not present in error message.</i>\";\n-\t\t\t\t}\n+                if (a != null) {\n+                    String attrName = a.getDisplayName();\n+                    String attrValue = a.getValue();\n+                    String entity = a.getEntity();\n+                    text += \"<p><strong>Setting&nbsp;1:</strong>&nbsp;\" + attrName + \" (\" + entity + \")\";\n+                    text += \"<br/><strong>Value&nbsp;1:</strong>&nbsp;\" + attrValue;\n+                } else {\n+                    text += \"<p><i>Setting 1 is null or not present in error message.</i>\";\n+                }\n \n-\t\t\t\tif (a2 != null) {\n-\t\t\t\t\tString attrName = a2.getDisplayName();\n-\t\t\t\t\tString attrValue = a2.getValue();\n-\t\t\t\t\tString entity = a2.getEntity();\n-\t\t\t\t\ttext += \"<p><strong>Setting&nbsp;2:</strong>&nbsp;\" + attrName + \" (\" + entity + \")\";\n-\t\t\t\t\ttext += \"<br/><strong>Value&nbsp;2:</strong>&nbsp;\" + attrValue;\n-\t\t\t\t} else {\n-\t\t\t\t\ttext += \"<p><i>Setting 2 is null or not present in error message.</i>\";\n-\t\t\t\t}\n+                if (a2 != null) {\n+                    String attrName = a2.getDisplayName();\n+                    String attrValue = a2.getValue();\n+                    String entity = a2.getEntity();\n+                    text += \"<p><strong>Setting&nbsp;2:</strong>&nbsp;\" + attrName + \" (\" + entity + \")\";\n+                    text += \"<br/><strong>Value&nbsp;2:</strong>&nbsp;\" + attrValue;\n+                } else {\n+                    text += \"<p><i>Setting 2 is null or not present in error message.</i>\";\n+                }\n \n-\t\t\t\tUiElements.generateError(error, \"Wrong settings\", text);\n+                UiElements.generateError(error, \"Wrong settings\", text);\n \n-\t\t\t} else {\n+            } else {\n \n-\t\t\t\t// use standard processing for other errors\n-\t\t\t\tJsonErrorHandler.alertBox(error);\n+                // use standard processing for other errors\n+                JsonErrorHandler.alertBox(error);\n \n-\t\t\t}\n+            }\n \n-\t\t}\n+        }\n \n \n-\t}\n+    }\n \n }\n",
            "diff_size": 179
        },
        {
            "tool": "naturalize",
            "errors": null,
            "diff": null
        },
        {
            "tool": "codebuff",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/codebuff/496/AssignGroupToResources.java\nindex a5b7c5d4c29..335e437e518 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/codebuff/496/AssignGroupToResources.java\n@@ -10,7 +10,6 @@ import cz.metacentrum.perun.webgui.json.JsonCallbackEvents;\n import cz.metacentrum.perun.webgui.json.JsonErrorHandler;\n import cz.metacentrum.perun.webgui.json.JsonPostClient;\n import cz.metacentrum.perun.webgui.model.*;\n-\n import java.util.ArrayList;\n \n /**\n@@ -18,218 +17,200 @@ import java.util.ArrayList;\n  *\n  * @author Pavel Zlamal <256627@mail.muni.cz>\n  */\n-public class AssignGroupToResources {\n-\n-\t// web session\n-\tprivate PerunWebSession session = PerunWebSession.getInstance();\n-\t// URL to call\n-\tfinal String JSON_URL = \"resourcesManager/assignGroupToResources\";\n-\t// external events\n-\tprivate JsonCallbackEvents events = new JsonCallbackEvents();\n-\t// ids\n-\tprivate Group group;\n-\tprivate ArrayList<RichResource> resources;\n-\n-\t/**\n-\t * Creates a new request\n-\t */\n-\tpublic AssignGroupToResources() {}\n-\n-\t/**\n-\t * Creates a new request with custom events passed from tab or page\n-\t *\n-\t * @param events external events\n-\t */\n-\tpublic AssignGroupToResources(final JsonCallbackEvents events) {\n-\t\tthis.events = events;\n-\t}\n-\n-\t/**\n-\t * Attempts to assign group to resources\n-\t *\n-\t * @param group group which should be assigned\n-\t * @param resources resources where group should be assigned\n-\t */\n-\tpublic void assignGroupToResources(final Group group, final ArrayList<RichResource> resources) {\n-\n-\t\tthis.group = group;\n-\t\tthis.resources = resources;\n-\n-\t\t// test arguments\n-\t\tif(!this.testAssigning()){\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t// new events\n-\t\tJsonCallbackEvents newEvents = new JsonCallbackEvents(){\n-\t\t\tpublic void onError(PerunError error) {\n-\t\t\t\tsession.getUiElements().setLogErrorText(\"Assigning group: \" + group.getShortName() + \" failed.\");\n-\t\t\t\thandleCommonExceptions(error, group);\n-\t\t\t\tevents.onError(error);\n-\t\t\t};\n-\n-\t\t\tpublic void onFinished(JavaScriptObject jso) {\n-\t\t\t\tsession.getUiElements().setLogSuccessText(\"Group: \"+group.getShortName()+\" was successfully assigned to resources.\");\n-\t\t\t\tevents.onFinished(jso);\n-\t\t\t};\n-\n-\t\t\tpublic void onLoadingStart() {\n-\t\t\t\tevents.onLoadingStart();\n-\t\t\t};\n-\t\t};\n-\n-\t\t// sending data\n-\t\tJsonPostClient jspc = new JsonPostClient(newEvents);\n-        // to allow own error handling for attributes errors.\n-        jspc.setHidden(true);\n-\t\tjspc.sendData(JSON_URL, prepareJSONObject());\n-\n-\t}\n-\n-\t/**\n-\t * Tests the values, if the process can continue\n-\t *\n-\t * @return true/false for continue/stop\n-\t */\n-\tprivate boolean testAssigning() {\n-\n-\t\tboolean result = true;\n-\t\tString errorMsg = \"\";\n-\n-\t\tif(resources == null || resources.isEmpty()){\n-\t\t\terrorMsg += \"Wrong parameter <strong>Resources</strong>.<br />\";\n-\t\t\tresult = false;\n-\t\t}\n-\n-\t\tif(group == null){\n-\t\t\terrorMsg += \"Wrong parameter <strong>group</strong>.\";\n-\t\t\tresult = false;\n-\t\t}\n-\n-\t\tif(errorMsg.length()>0){\n-\t\t\tUiElements.generateAlert(\"Parameter error\", errorMsg);\n-\t\t}\n-\n-\t\treturn result;\n-\t}\n-\n-\t/**\n-\t * Prepares a JSON object\n-\t *\n-\t * @return JSONObject the whole query\n-\t */\n-\tprivate JSONObject prepareJSONObject() {\n-\n-\t\tJSONObject jsonQuery = new JSONObject();\n-\n-\t\tJSONArray array = new JSONArray();\n-\t\tfor (int i=0; i< resources.size(); i++) {\n-\t\t\tarray.set(i, new JSONNumber(resources.get(i).getId()));\n-\t\t}\n-\t\tjsonQuery.put(\"resources\", array);\n-\t\tjsonQuery.put(\"group\", new JSONNumber(group.getId()));\n-\n-\t\treturn jsonQuery;\n-\t}\n \n-\t/**\n-\t * Handle common exceptions caused by this callback.\n-\t *\n-\t * @param error     PerunError returned from Perun\n-\t * @param group  related group\n-\t */\n-\tprivate void handleCommonExceptions(PerunError error, Group group) {\n \n-\t\tif (error != null) {\n-\n-\t\t\tif (\"WrongAttributeValueException\".equals(error.getName())) {\n-\n-\t\t\t\tAttribute a = error.getAttribute();\n-\t\t\t\tGeneralObject holder = error.getAttributeHolder();\n-\t\t\t\tGeneralObject secondHolder = error.getAttributeHolderSecondary();\n-\n-\t\t\t\tString text = \"Group \"+group.getShortName()+\" can't be assigned to one of resources.\";\n-\n-\t\t\t\tif (a != null) {\n-\n-\t\t\t\t\tif (a.getValue().equals(\"null\")) {\n-\t\t\t\t\t\ttext += \"<p>Following setting is missing, but it's required by services on resource.\";\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\ttext += \"<p>Following setting, required by services on resource, is wrong.\";\n-\t\t\t\t\t}\n-\n-\t\t\t\t\tString attrName = a.getDisplayName();\n-\t\t\t\t\tString attrValue = a.getValue();\n-\t\t\t\t\ttext += \"<p><strong>Setting:&nbsp;</strong>\" + attrName + \"<br />\";\n-\n-\t\t\t\t\tif (holder != null) {\n-\t\t\t\t\t\tif (!holder.getName().equalsIgnoreCase(\"undefined\")) {\n-\t\t\t\t\t\t\ttext += \"<strong>\" + holder.getObjectType() + \":</strong>&nbsp;\" + holder.getName() + \"<br />\";\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tif (secondHolder != null) {\n-\t\t\t\t\t\tif (!secondHolder.getName().equalsIgnoreCase(\"undefined\")) {\n-\t\t\t\t\t\t\ttext += \"<strong>\" + secondHolder.getObjectType() + \":</strong>&nbsp;\" + secondHolder.getName() + \"<br />\";\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\tif (!a.getValue().equals(\"null\")) {\n-\t\t\t\t\t\ttext += \"<strong>Value:&nbsp;</strong>\" + attrValue;\n-\t\t\t\t\t}\n-\n-\t\t\t\t\ttext += \"<p>Please fix the issue before assigning group to resource on group's settings page.\";\n-\n-\t\t\t\t} else {\n-\t\t\t\t\ttext += \"<p><i>Attribute is null, please report this error.</i>\";\n-\t\t\t\t}\n+public class AssignGroupToResources {\n \n-\t\t\t\tUiElements.generateError(error, \"Wrong settings\", text);\n+ // web session\n \n-\t\t\t} else if (\"GroupAlreadyAssignedException\".equals(error.getName())) {\n \n-\t\t\t\tUiElements.generateError(error, \"Already assigned\", \"Group is already assigned to one of resources.\");\n+ private PerunWebSession session = PerunWebSession.getInstance();\n+ // URL to call\n \n-\t\t\t} else if (\"WrongReferenceAttributeValueException\".equals(error.getName())) {\n+ final String JSON_URL = \"resourcesManager/assignGroupToResources\";\n+ // external events\n+ private JsonCallbackEvents events = new JsonCallbackEvents();\n+ // ids\n+ private Group group;\n+ private ArrayList<RichResource> resources;\n \n-\t\t\t\tString text = \"Group \"+group.getShortName()+\" can't be assigned to one of resources.\";\n+ /**\n+  * Creates a new request\n+  */\n \n-\t\t\t\ttext += \"<p>Following combination of settings is not correct:\";\n \n-\t\t\t\tAttribute a = error.getAttribute();\n-\t\t\t\tAttribute a2 = error.getReferenceAttribute();\n+ public AssignGroupToResources() {}\n \n-\t\t\t\tif (a != null) {\n-\t\t\t\t\tString attrName = a.getDisplayName();\n-\t\t\t\t\tString attrValue = a.getValue();\n-\t\t\t\t\tString entity = a.getEntity();\n-\t\t\t\t\ttext += \"<p><strong>Setting&nbsp;1:</strong>&nbsp;\" + attrName + \" (\" + entity + \")\";\n-\t\t\t\t\ttext += \"<br/><strong>Value&nbsp;1:</strong>&nbsp;\" + attrValue;\n-\t\t\t\t} else {\n-\t\t\t\t\ttext += \"<p><i>Setting 1 is null or not present in error message.</i>\";\n-\t\t\t\t}\n+ /**\n+  * Creates a new request with custom events passed from tab or page\n+  *\n+  * @param events external events\n+  */\n \n-\t\t\t\tif (a2 != null) {\n-\t\t\t\t\tString attrName = a2.getDisplayName();\n-\t\t\t\t\tString attrValue = a2.getValue();\n-\t\t\t\t\tString entity = a2.getEntity();\n-\t\t\t\t\ttext += \"<p><strong>Setting&nbsp;2:</strong>&nbsp;\" + attrName + \" (\" + entity + \")\";\n-\t\t\t\t\ttext += \"<br/><strong>Value&nbsp;2:</strong>&nbsp;\" + attrValue;\n-\t\t\t\t} else {\n-\t\t\t\t\ttext += \"<p><i>Setting 2 is null or not present in error message.</i>\";\n-\t\t\t\t}\n \n-\t\t\t\tUiElements.generateError(error, \"Wrong settings\", text);\n+ public AssignGroupToResources(final JsonCallbackEvents events) {\n+  this.events = events;\n+ }\n \n-\t\t\t} else {\n+ /**\n+  * Attempts to assign group to resources\n+  *\n+  * @param group group which should be assigned\n+  * @param resources resources where group should be assigned\n+  */\n \n-\t\t\t\t// use standard processing for other errors\n-\t\t\t\tJsonErrorHandler.alertBox(error);\n+ public void assignGroupToResources(final Group group, final ArrayList<RichResource> resources) {\n+  this.group = group;\n+  this.resources = resources;\n \n-\t\t\t}\n+  // test arguments\n+  if (!this.testAssigning()) {\n+   return;\n+  }\n \n-\t\t}\n+  // new events\n+  JsonCallbackEvents newEvents = new JsonCallbackEvents() {\n+                      public void onError(PerunError error) {\n+                       session.getUiElements().setLogErrorText(\"Assigning group: \" + group.getShortName() + \" failed.\");\n+                       handleCommonExceptions(error, group);\n+                       events.onError(error);\n+                      };\n \n+                      public void onFinished(JavaScriptObject jso) {\n+                       session.getUiElements().setLogSuccessText(\"Group: \" + group.getShortName() + \" was successfully assigned to resources.\");\n+                       events.onFinished(jso);\n+                      };\n \n-\t}\n+                      public void onLoadingStart() {\n+                       events.onLoadingStart();\n+                      };\n+  };\n \n-}\n+  // sending data\n+  JsonPostClient jspc = new JsonPostClient(newEvents);\n+        // to allow own error handling for attributes errors.\n+  jspc.setHidden(true);\n+  jspc.sendData(JSON_URL, prepareJSONObject());\n+ }\n+\n+ /**\n+  * Tests the values, if the process can continue\n+  *\n+  * @return true/false for continue/stop\n+  */\n+\n+\n+ private boolean testAssigning() {\n+\n+                                  boolean result = true;\n+                                  String errorMsg = \"\";\n+                                  if (resources == null || resources.isEmpty()) {\n+                                   errorMsg += \"Wrong parameter <strong>Resources</strong>.<br />\";\n+                                   result = false;\n+                                  }\n+                                  if (group == null) {\n+                                   errorMsg += \"Wrong parameter <strong>group</strong>.\";\n+                                   result = false;\n+                                  }\n+                                  if (errorMsg.length() > 0) {\n+                                   UiElements.generateAlert(\"Parameter error\", errorMsg);\n+                                  }\n+\n+                                  return result;\n+ }\n+\n+ /**\n+  * Prepares a JSON object\n+  *\n+  * @return JSONObject the whole query\n+  */\n+\n+\n+ private JSONObject prepareJSONObject() {\n+  JSONObject jsonQuery = new JSONObject();\n+  JSONArray array = new JSONArray();\n+  for (int i = 0; i<resources.size(); i++) {\n+   array.set(i, new JSONNumber(resources.get(i).getId()));\n+  }\n+  jsonQuery.put(\"resources\", array);\n+  jsonQuery.put(\"group\", new JSONNumber(group.getId()));\n+  return jsonQuery;\n+ }\n+\n+ /**\n+  * Handle common exceptions caused by this callback.\n+  *\n+  * @param error     PerunError returned from Perun\n+  * @param group  related group\n+  */\n+\n+\n+ private void handleCommonExceptions(PerunError error, Group group) {\n+  if (error != null) {\n+   if (\"WrongAttributeValueException\".equals(error.getName())) {\n+    Attribute a = error.getAttribute();\n+    GeneralObject holder = error.getAttributeHolder();\n+    GeneralObject secondHolder = error.getAttributeHolderSecondary();\n+    String text = \"Group \" + group.getShortName() + \" can't be assigned to one of resources.\";\n+    if (a != null) {\n+     if (a.getValue().equals(\"null\")) {\n+      text += \"<p>Following setting is missing, but it's required by services on resource.\";\n+     } else {\n+      text += \"<p>Following setting, required by services on resource, is wrong.\";\n+     }\n+     String attrName = a.getDisplayName();\n+     String attrValue = a.getValue();\n+     text += \"<p><strong>Setting:&nbsp;</strong>\" + attrName + \"<br />\";\n+     if (holder != null) {\n+      if (!holder.getName().equalsIgnoreCase(\"undefined\")) {\n+       text += \"<strong>\" + holder.getObjectType() + \":</strong>&nbsp;\" + holder.getName() + \"<br />\";\n+      }\n+     }\n+     if (secondHolder != null) {\n+      if (!secondHolder.getName().equalsIgnoreCase(\"undefined\")) {\n+       text += \"<strong>\" + secondHolder.getObjectType() + \":</strong>&nbsp;\" + secondHolder.getName() + \"<br />\";\n+      }\n+     }\n+     if (!a.getValue().equals(\"null\")) {\n+      text += \"<strong>Value:&nbsp;</strong>\" + attrValue;\n+     }\n+     text += \"<p>Please fix the issue before assigning group to resource on group's settings page.\";\n+    } else {\n+     text += \"<p><i>Attribute is null, please report this error.</i>\";\n+    }\n+    UiElements.generateError(error, \"Wrong settings\", text);\n+   } else if (\"GroupAlreadyAssignedException\".equals(error.getName())) {\n+    UiElements.generateError(error, \"Already assigned\", \"Group is already assigned to one of resources.\");\n+   } else if (\"WrongReferenceAttributeValueException\".equals(error.getName())) {\n+           String text = \"Group \" + group.getShortName() + \" can't be assigned to one of resources.\";\n+           text += \"<p>Following combination of settings is not correct:\";\n+           Attribute a = error.getAttribute();\n+           Attribute a2 = error.getReferenceAttribute();\n+           if (a != null) {\n+            String attrName = a.getDisplayName();\n+            String attrValue = a.getValue();\n+            String entity = a.getEntity();\n+            text += \"<p><strong>Setting&nbsp;1:</strong>&nbsp;\" + attrName + \" (\" + entity + \")\";\n+            text += \"<br/><strong>Value&nbsp;1:</strong>&nbsp;\" + attrValue;\n+           } else {\n+            text += \"<p><i>Setting 1 is null or not present in error message.</i>\";\n+           }\n+           if (a2 != null) {\n+            String attrName = a2.getDisplayName();\n+            String attrValue = a2.getValue();\n+            String entity = a2.getEntity();\n+            text += \"<p><strong>Setting&nbsp;2:</strong>&nbsp;\" + attrName + \" (\" + entity + \")\";\n+            text += \"<br/><strong>Value&nbsp;2:</strong>&nbsp;\" + attrValue;\n+           } else {\n+            text += \"<p><i>Setting 2 is null or not present in error message.</i>\";\n+           }\n+           UiElements.generateError(error, \"Wrong settings\", text);\n+          } else {\n+\n+    // use standard processing for other errors\n+           JsonErrorHandler.alertBox(error);\n+          }\n+  }\n+ }\n+\n+}\n\\ No newline at end of file\n",
            "diff_size": 356
        },
        {
            "tool": "styler_random",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/styler_random/496/AssignGroupToResources.java\nindex a5b7c5d4c29..63d555f1f20 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/styler_random/496/AssignGroupToResources.java\n@@ -80,7 +80,7 @@ public class AssignGroupToResources {\n \n \t\t// sending data\n \t\tJsonPostClient jspc = new JsonPostClient(newEvents);\n-        // to allow own error handling for attributes errors.\n+// to allow own error handling for attributes errors.\n         jspc.setHidden(true);\n \t\tjspc.sendData(JSON_URL, prepareJSONObject());\n \n",
            "diff_size": 1
        },
        {
            "tool": "styler_three_grams",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/styler_three_grams/496/AssignGroupToResources.java\nindex a5b7c5d4c29..05cc0c91136 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/errored/1/496/AssignGroupToResources.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/CESNET-perun/styler_three_grams/496/AssignGroupToResources.java\n@@ -80,8 +80,8 @@ public class AssignGroupToResources {\n \n \t\t// sending data\n \t\tJsonPostClient jspc = new JsonPostClient(newEvents);\n-        // to allow own error handling for attributes errors.\n-        jspc.setHidden(true);\n+\t\t// to allow own error handling for attributes errors.\n+\t\t\t\t\t\t\t\tjspc.setHidden(true);\n \t\tjspc.sendData(JSON_URL, prepareJSONObject());\n \n \t}\n",
            "diff_size": 2
        }
    ],
    "repaired_by": [
        "styler",
        "intellij",
        "codebuff",
        "styler_random",
        "styler_three_grams"
    ],
    "not_repaired_by": [
        "naturalize"
    ]
}