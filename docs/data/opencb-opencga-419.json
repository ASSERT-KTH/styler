{
    "project_name": "opencb-opencga",
    "error_id": "419",
    "information": {
        "errors": [
            {
                "line": "97",
                "column": "18",
                "severity": "error",
                "message": "'while' is not followed by whitespace.",
                "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.WhitespaceAroundCheck"
            }
        ]
    },
    "source_code": "            FileInputStream fis = new FileInputStream(tpedFilename);\n            Scanner sc = new Scanner(fis);\n            while(sc.hasNextLine()) {\n                String[] splits = sc.nextLine().split(\"\\t\");\n                String[] varSplits = splits[1].split(\":\");\n",
    "results": [
        {
            "tool": "styler",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/styler/419/IBDComputation.java\nindex 9c73efc6f61..4dd02c15f83 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/styler/419/IBDComputation.java\n@@ -94,7 +94,7 @@ public class IBDComputation {\n \n             FileInputStream fis = new FileInputStream(tpedFilename);\n             Scanner sc = new Scanner(fis);\n-            while(sc.hasNextLine()) {\n+            while (sc.hasNextLine()) {\n                 String[] splits = sc.nextLine().split(\"\\t\");\n                 String[] varSplits = splits[1].split(\":\");\n \n",
            "diff_size": 1
        },
        {
            "tool": "intellij",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/intellij/419/IBDComputation.java\nindex 9c73efc6f61..a358e255900 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/intellij/419/IBDComputation.java\n@@ -29,129 +29,129 @@ import java.util.*;\n \n public class IBDComputation {\n \n-    private static final String BASENAME = \"variants\";\n+  private static final String BASENAME = \"variants\";\n \n-    public static RelatednessReport compute(String study, List<String> samples, String maf, Path outDir,\n-                                            VariantStorageManager storageManager, String token) throws ToolException {\n-        // Select markers\n-        IndividualQcUtils.selectMarkers(BASENAME, study, samples, maf, outDir, storageManager, token);\n+  public static RelatednessReport compute(String study, List<String> samples, String maf, Path outDir,\n+                                          VariantStorageManager storageManager, String token) throws ToolException {\n+    // Select markers\n+    IndividualQcUtils.selectMarkers(BASENAME, study, samples, maf, outDir, storageManager, token);\n \n-        // run IBD and return the result file (now autosome-file comprises X chromosome too)\n-        File outFile = runIBD(BASENAME, outDir);\n+    // run IBD and return the result file (now autosome-file comprises X chromosome too)\n+    File outFile = runIBD(BASENAME, outDir);\n \n-        if (!outFile.exists()) {\n-            throw new ToolException(\"Something wrong happened executing relatedness analysis\");\n-        }\n-\n-        RelatednessReport relatedness = new RelatednessReport()\n-                .setMethod(\"PLINK/IBD\")\n-                .setMaf(maf)\n-                .setScores(parseRelatednessScores(outFile));\n-\n-        return relatedness;\n+    if (!outFile.exists()) {\n+      throw new ToolException(\"Something wrong happened executing relatedness analysis\");\n     }\n \n-    private static File runIBD(String basename, Path outDir) throws ToolException {\n-        AbstractMap.SimpleEntry<String, String> outputBinding = new AbstractMap.SimpleEntry<>(outDir.toAbsolutePath().toString(),\n-                \"/data/output\");\n+    RelatednessReport relatedness = new RelatednessReport()\n+        .setMethod(\"PLINK/IBD\")\n+        .setMaf(maf)\n+        .setScores(parseRelatednessScores(outFile));\n \n-        // Calculate allele frequencies to pass to PLINK: --read-freq <.freq filename>\n-        String readFreq = \"\";\n-        String readFreqFilename = basename + \".maf.freq\";\n-        createReadFreqFile(outputBinding.getKey() + \"/\" + basename + \".tped\", outputBinding.getKey() + \"/\" + readFreqFilename);\n-        if (new File(outputBinding.getKey() + \"/\" + readFreqFilename).exists()) {\n-            readFreq = \" --read-freq /data/output/\" + readFreqFilename;\n-        }\n+    return relatedness;\n+  }\n \n-        // Run IBD using PLINK in docker\n-        String exclude = \"\";\n-        File pruneOutFile = new File(outputBinding.getKey() + \"/\" + basename + \".prune.out\");\n-        if (pruneOutFile.exists() && pruneOutFile.length() > 0) {\n-            exclude = \" --exclude /data/output/\" + basename + \".prune.out\";\n-        }\n-        String plinkParams = \"plink --tfile /data/output/\" + basename + \" --genome rel-check \" + readFreq + exclude + \" --out /data/output/\"\n-                + basename;\n-        try {\n-            DockerUtils.run(PlinkWrapperAnalysis.PLINK_DOCKER_IMAGE, null, outputBinding, plinkParams, null);\n-        } catch (IOException e) {\n-            throw new ToolException(e);\n-        }\n+  private static File runIBD(String basename, Path outDir) throws ToolException {\n+    AbstractMap.SimpleEntry<String, String> outputBinding = new AbstractMap.SimpleEntry<>(outDir.toAbsolutePath().toString(),\n+        \"/data/output\");\n \n-        // Check output file\n-        File outFile = new File(outputBinding.getKey() + \"/\" + basename + \".genome\");\n-        if (!outFile.exists()) {\n-            throw new ToolException(\"Something wrong executing relatedness analysis (i.e., IBD/IBS computation) in PLINK docker.\");\n-        }\n+    // Calculate allele frequencies to pass to PLINK: --read-freq <.freq filename>\n+    String readFreq = \"\";\n+    String readFreqFilename = basename + \".maf.freq\";\n+    createReadFreqFile(outputBinding.getKey() + \"/\" + basename + \".tped\", outputBinding.getKey() + \"/\" + readFreqFilename);\n+    if (new File(outputBinding.getKey() + \"/\" + readFreqFilename).exists()) {\n+      readFreq = \" --read-freq /data/output/\" + readFreqFilename;\n+    }\n \n-        return outFile;\n+    // Run IBD using PLINK in docker\n+    String exclude = \"\";\n+    File pruneOutFile = new File(outputBinding.getKey() + \"/\" + basename + \".prune.out\");\n+    if (pruneOutFile.exists() && pruneOutFile.length() > 0) {\n+      exclude = \" --exclude /data/output/\" + basename + \".prune.out\";\n+    }\n+    String plinkParams = \"plink --tfile /data/output/\" + basename + \" --genome rel-check \" + readFreq + exclude + \" --out /data/output/\"\n+        + basename;\n+    try {\n+      DockerUtils.run(PlinkWrapperAnalysis.PLINK_DOCKER_IMAGE, null, outputBinding, plinkParams, null);\n+    } catch (IOException e) {\n+      throw new ToolException(e);\n     }\n \n-    private static void createReadFreqFile(String tpedFilename, String mafFilename) throws ToolException {\n-        try (FileWriter f = new FileWriter(mafFilename, true);\n-             PrintWriter p = new PrintWriter(new BufferedWriter(f))) {\n-\n-            p.println(\"CHR\\tSNP\\tA1\\tA2\\tMAF\\tNCHROBS\");\n-\n-            FileInputStream fis = new FileInputStream(tpedFilename);\n-            Scanner sc = new Scanner(fis);\n-            while(sc.hasNextLine()) {\n-                String[] splits = sc.nextLine().split(\"\\t\");\n-                String[] varSplits = splits[1].split(\":\");\n-\n-                int a1 = 0;\n-                int a2 = 0;\n-                for (int i = 4; i < splits.length; i++) {\n-                    if (splits[i].equals(varSplits[2])) {\n-                        a1++;\n-                    } else if (splits[i].equals(varSplits[3])) {\n-                        a2++;\n-                    }\n-                }\n-                p.println(splits[0] + \"\\t\" + splits[1] + \"\\t\" + varSplits[2] + \"\\t\" + varSplits[3] + \"\\t\" + (1.0d * a2 / (a1 + a2)) + \"\\t\"\n-                        + (a1 + a2));\n-            }\n-        } catch (IOException e) {\n-            throw new ToolException(e);\n-        }\n+    // Check output file\n+    File outFile = new File(outputBinding.getKey() + \"/\" + basename + \".genome\");\n+    if (!outFile.exists()) {\n+      throw new ToolException(\"Something wrong executing relatedness analysis (i.e., IBD/IBS computation) in PLINK docker.\");\n     }\n \n-    public static List<RelatednessReport.RelatednessScore> parseRelatednessScores(File file) throws ToolException {\n-        List<RelatednessReport.RelatednessScore> scores = new ArrayList<>();\n-\n-        String line;\n-        BufferedReader reader;\n-        try {\n-            reader = new BufferedReader(new FileReader(file));\n-\n-            // Skip first line is the header\n-            // FID1         IID1 FID2         IID2 RT    EZ      Z0      Z1      Z2  PI_HAT PHE       DST     PPC   RATIO\n-            reader.readLine();\n-\n-            while ((line = reader.readLine()) != null) {\n-                String[] splits = line.trim().split(\"\\\\s+\");\n-\n-                // Create relatedness score\n-                RelatednessReport.RelatednessScore score = new RelatednessReport.RelatednessScore();\n-                score.setSampleId1(splits[1]);\n-                score.setSampleId2(splits[3]);\n-                score.setInferredRelationship(splits[4]);\n-\n-                Map<String, Object> values = new LinkedHashMap<>();\n-                values.put(\"ez\", splits[5]);\n-                values.put(\"z0\", splits[6]);\n-                values.put(\"z1\", splits[7]);\n-                values.put(\"z2\", splits[8]);\n-                values.put(\"PiHat\", splits[9]);\n-                score.setValues(values);\n-\n-                // Add relatedness score to the report\n-                scores.add(score);\n-            }\n-            reader.close();\n-        } catch (IOException e) {\n-            throw new ToolException(e);\n+    return outFile;\n+  }\n+\n+  private static void createReadFreqFile(String tpedFilename, String mafFilename) throws ToolException {\n+    try (FileWriter f = new FileWriter(mafFilename, true);\n+         PrintWriter p = new PrintWriter(new BufferedWriter(f))) {\n+\n+      p.println(\"CHR\\tSNP\\tA1\\tA2\\tMAF\\tNCHROBS\");\n+\n+      FileInputStream fis = new FileInputStream(tpedFilename);\n+      Scanner sc = new Scanner(fis);\n+      while (sc.hasNextLine()) {\n+        String[] splits = sc.nextLine().split(\"\\t\");\n+        String[] varSplits = splits[1].split(\":\");\n+\n+        int a1 = 0;\n+        int a2 = 0;\n+        for (int i = 4; i < splits.length; i++) {\n+          if (splits[i].equals(varSplits[2])) {\n+            a1++;\n+          } else if (splits[i].equals(varSplits[3])) {\n+            a2++;\n+          }\n         }\n-\n-        return scores;\n+        p.println(splits[0] + \"\\t\" + splits[1] + \"\\t\" + varSplits[2] + \"\\t\" + varSplits[3] + \"\\t\" + (1.0d * a2 / (a1 + a2)) + \"\\t\"\n+            + (a1 + a2));\n+      }\n+    } catch (IOException e) {\n+      throw new ToolException(e);\n+    }\n+  }\n+\n+  public static List<RelatednessReport.RelatednessScore> parseRelatednessScores(File file) throws ToolException {\n+    List<RelatednessReport.RelatednessScore> scores = new ArrayList<>();\n+\n+    String line;\n+    BufferedReader reader;\n+    try {\n+      reader = new BufferedReader(new FileReader(file));\n+\n+      // Skip first line is the header\n+      // FID1         IID1 FID2         IID2 RT    EZ      Z0      Z1      Z2  PI_HAT PHE       DST     PPC   RATIO\n+      reader.readLine();\n+\n+      while ((line = reader.readLine()) != null) {\n+        String[] splits = line.trim().split(\"\\\\s+\");\n+\n+        // Create relatedness score\n+        RelatednessReport.RelatednessScore score = new RelatednessReport.RelatednessScore();\n+        score.setSampleId1(splits[1]);\n+        score.setSampleId2(splits[3]);\n+        score.setInferredRelationship(splits[4]);\n+\n+        Map<String, Object> values = new LinkedHashMap<>();\n+        values.put(\"ez\", splits[5]);\n+        values.put(\"z0\", splits[6]);\n+        values.put(\"z1\", splits[7]);\n+        values.put(\"z2\", splits[8]);\n+        values.put(\"PiHat\", splits[9]);\n+        score.setValues(values);\n+\n+        // Add relatedness score to the report\n+        scores.add(score);\n+      }\n+      reader.close();\n+    } catch (IOException e) {\n+      throw new ToolException(e);\n     }\n+\n+    return scores;\n+  }\n }\n",
            "diff_size": 168
        },
        {
            "tool": "naturalize",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/naturalize/419/IBDComputation.java\nindex 9c73efc6f61..f65298057c0 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/naturalize/419/IBDComputation.java\n@@ -33,7 +33,7 @@ public class IBDComputation {\n \n     public static RelatednessReport compute(String study, List<String> samples, String maf, Path outDir,\n                                             VariantStorageManager storageManager, String token) throws ToolException {\n-        // Select markers\n+    // Select markers\n         IndividualQcUtils.selectMarkers(BASENAME, study, samples, maf, outDir, storageManager, token);\n \n         // run IBD and return the result file (now autosome-file comprises X chromosome too)\n@@ -71,7 +71,7 @@ public class IBDComputation {\n         }\n         String plinkParams = \"plink --tfile /data/output/\" + basename + \" --genome rel-check \" + readFreq + exclude + \" --out /data/output/\"\n                 + basename;\n-        try {\n+try {\n             DockerUtils.run(PlinkWrapperAnalysis.PLINK_DOCKER_IMAGE, null, outputBinding, plinkParams, null);\n         } catch (IOException e) {\n             throw new ToolException(e);\n@@ -89,12 +89,11 @@ public class IBDComputation {\n     private static void createReadFreqFile(String tpedFilename, String mafFilename) throws ToolException {\n         try (FileWriter f = new FileWriter(mafFilename, true);\n              PrintWriter p = new PrintWriter(new BufferedWriter(f))) {\n-\n-            p.println(\"CHR\\tSNP\\tA1\\tA2\\tMAF\\tNCHROBS\");\n+    p.println(\"CHR\\tSNP\\tA1\\tA2\\tMAF\\tNCHROBS\");\n \n             FileInputStream fis = new FileInputStream(tpedFilename);\n             Scanner sc = new Scanner(fis);\n-            while(sc.hasNextLine()) {\n+            while (sc.hasNextLine()) {\n                 String[] splits = sc.nextLine().split(\"\\t\");\n                 String[] varSplits = splits[1].split(\":\");\n \n@@ -154,4 +153,4 @@ public class IBDComputation {\n \n         return scores;\n     }\n-}\n+}\n\\ No newline at end of file\n",
            "diff_size": 6
        },
        {
            "tool": "codebuff",
            "errors": null,
            "diff": null
        },
        {
            "tool": "styler_random",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/styler_random/419/IBDComputation.java\nindex 9c73efc6f61..4dd02c15f83 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/styler_random/419/IBDComputation.java\n@@ -94,7 +94,7 @@ public class IBDComputation {\n \n             FileInputStream fis = new FileInputStream(tpedFilename);\n             Scanner sc = new Scanner(fis);\n-            while(sc.hasNextLine()) {\n+            while (sc.hasNextLine()) {\n                 String[] splits = sc.nextLine().split(\"\\t\");\n                 String[] varSplits = splits[1].split(\":\");\n \n",
            "diff_size": 1
        },
        {
            "tool": "styler_three_grams",
            "errors": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/styler_three_grams/419/IBDComputation.java\nindex 9c73efc6f61..4dd02c15f83 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/errored/1/419/IBDComputation.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/opencb-opencga/styler_three_grams/419/IBDComputation.java\n@@ -94,7 +94,7 @@ public class IBDComputation {\n \n             FileInputStream fis = new FileInputStream(tpedFilename);\n             Scanner sc = new Scanner(fis);\n-            while(sc.hasNextLine()) {\n+            while (sc.hasNextLine()) {\n                 String[] splits = sc.nextLine().split(\"\\t\");\n                 String[] varSplits = splits[1].split(\":\");\n \n",
            "diff_size": 1
        }
    ],
    "repaired_by": [
        "styler",
        "intellij",
        "naturalize",
        "styler_random",
        "styler_three_grams"
    ],
    "not_repaired_by": [
        "codebuff"
    ]
}