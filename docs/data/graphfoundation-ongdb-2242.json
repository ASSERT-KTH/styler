{
    "project_name": "graphfoundation-ongdb",
    "error_id": "2242",
    "information": {
        "errors": [
            {
                "line": "1",
                "severity": "error",
                "message": "Missing, wrong or duplicated license header",
                "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
            }
        ]
    },
    "source_code": "/*\n * Copyright (c) 2002-2018 \"Neo Technology,\"\n * Network Engine for Objects in Lund AB [http://neotechnology.com]\n *",
    "results": [
        {
            "tool": "styler",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        },
        {
            "tool": "intellij",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                },
                {
                    "line": "109",
                    "column": "20",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "109",
                    "column": "57",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "125",
                    "column": "26",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "129",
                    "column": "141",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "153",
                    "column": "34",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "154",
                    "column": "101",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "158",
                    "column": "40",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "159",
                    "column": "66",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "172",
                    "column": "32",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "176",
                    "column": "51",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "176",
                    "column": "146",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "181",
                    "column": "58",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "182",
                    "column": "39",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "182",
                    "column": "54",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "182",
                    "column": "92",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "186",
                    "column": "85",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "186",
                    "column": "105",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "190",
                    "column": "96",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "190",
                    "column": "153",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "191",
                    "column": "91",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "191",
                    "column": "146",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "193",
                    "column": "80",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "197",
                    "column": "33",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "197",
                    "column": "61",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "197",
                    "column": "62",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "199",
                    "column": "119",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "200",
                    "column": "42",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "203",
                    "column": "101",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "205",
                    "column": "91",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "206",
                    "column": "79",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "208",
                    "column": "45",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "208",
                    "column": "66",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "220",
                    "column": "45",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "226",
                    "column": "38",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "230",
                    "column": "52",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "230",
                    "column": "131",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "233",
                    "column": "34",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "234",
                    "column": "96",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "240",
                    "column": "44",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "240",
                    "column": "101",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "242",
                    "column": "85",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "242",
                    "column": "105",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "248",
                    "column": "59",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "249",
                    "column": "78",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "254",
                    "column": "56",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "254",
                    "column": "126",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "257",
                    "column": "39",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "257",
                    "column": "141",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "259",
                    "column": "46",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "260",
                    "column": "28",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "260",
                    "column": "106",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "261",
                    "column": "25",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "261",
                    "column": "64",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "261",
                    "column": "134",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "264",
                    "column": "32",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "264",
                    "column": "129",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "266",
                    "column": "61",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "267",
                    "column": "54",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "269",
                    "column": "64",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "269",
                    "column": "124",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "270",
                    "column": "35",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "271",
                    "column": "104",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "277",
                    "column": "61",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "278",
                    "column": "59",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "280",
                    "column": "41",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "280",
                    "column": "122",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "293",
                    "column": "33",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "293",
                    "column": "119",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "295",
                    "column": "24",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "297",
                    "column": "50",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                }
            ],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/errored/1/2242/CoreServerModule.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/intellij/2242/CoreServerModule.java\nindex db0be393374..27606156e9d 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/errored/1/2242/CoreServerModule.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/intellij/2242/CoreServerModule.java\n@@ -17,6 +17,7 @@\n  * You should have received a copy of the GNU Affero General Public License\n  * along with this program. If not, see <http://www.gnu.org/licenses/>.\n  */\n+\n package org.neo4j.causalclustering.core.server;\n \n import java.io.File;\n@@ -99,210 +100,210 @@ import static org.neo4j.time.Clocks.systemClock;\n \n public class CoreServerModule\n {\n-    public static final String CLUSTER_ID_NAME = \"cluster-id\";\n-    public static final String LAST_FLUSHED_NAME = \"last-flushed\";\n-    public static final String DB_NAME = \"db-name\";\n-\n-    public final MembershipWaiterLifecycle membershipWaiterLifecycle;\n-    private final Server catchupServer;\n-    @SuppressWarnings( \"OptionalUsedAsFieldOrParameterType\" )\n-    private final Optional<Server> backupServer;\n-    private final IdentityModule identityModule;\n-    private final CoreStateMachinesModule coreStateMachinesModule;\n-    private final ConsensusModule consensusModule;\n-    private final ClusteringModule clusteringModule;\n-    private final LocalDatabase localDatabase;\n-    private final Supplier<DatabaseHealth> dbHealthSupplier;\n-    private final CommandApplicationProcess commandApplicationProcess;\n-    private final CoreSnapshotService snapshotService;\n-    private final CoreStateDownloaderService downloadService;\n-    private final Config config;\n-    private final JobScheduler jobScheduler;\n-    private final LogProvider logProvider;\n-    private final PlatformModule platformModule;\n-\n-    public CoreServerModule( IdentityModule identityModule, final PlatformModule platformModule, ConsensusModule consensusModule,\n-            CoreStateMachinesModule coreStateMachinesModule, ClusteringModule clusteringModule, ReplicationModule replicationModule,\n-            LocalDatabase localDatabase, Supplier<DatabaseHealth> dbHealthSupplier, File clusterStateDirectory,\n-            NettyPipelineBuilderFactory clientPipelineBuilderFactory, NettyPipelineBuilderFactory serverPipelineBuilderFactory,\n-            NettyPipelineBuilderFactory backupServerPipelineBuilderFactory, InstalledProtocolHandler installedProtocolsHandler )\n-    {\n-        this.identityModule = identityModule;\n-        this.coreStateMachinesModule = coreStateMachinesModule;\n-        this.consensusModule = consensusModule;\n-        this.clusteringModule = clusteringModule;\n-        this.localDatabase = localDatabase;\n-        this.dbHealthSupplier = dbHealthSupplier;\n-        this.platformModule = platformModule;\n-\n-        this.config = platformModule.config;\n-        this.jobScheduler = platformModule.jobScheduler;\n-\n-        final Dependencies dependencies = platformModule.dependencies;\n-        final LogService logging = platformModule.logging;\n-        final FileSystemAbstraction fileSystem = platformModule.fileSystem;\n-        final LifeSupport life = platformModule.life;\n-\n-        this.logProvider = logging.getInternalLogProvider();\n-        LogProvider userLogProvider = logging.getUserLogProvider();\n-\n-        CompositeSuspendable servicesToStopOnStoreCopy = new CompositeSuspendable();\n-\n-        StateStorage<Long> lastFlushedStorage = platformModule.life.add(\n-                new DurableStateStorage<>( platformModule.fileSystem, clusterStateDirectory, LAST_FLUSHED_NAME, new LongIndexMarshal(),\n-                        platformModule.config.get( CausalClusteringSettings.last_flushed_state_size ), logProvider ) );\n-\n-        consensusModule.raftMembershipManager().setRecoverFromIndexSupplier( lastFlushedStorage::getInitialState );\n-\n-        CoreState coreState = new CoreState( coreStateMachinesModule.coreStateMachines,\n-                replicationModule.getSessionTracker(), lastFlushedStorage );\n-\n-        final Supplier<DatabaseHealth> databaseHealthSupplier = platformModule.dependencies.provideDependency( DatabaseHealth.class );\n-        commandApplicationProcess = new CommandApplicationProcess(\n-                consensusModule.raftLog(),\n-                platformModule.config.get( CausalClusteringSettings.state_machine_apply_max_batch_size ),\n-                platformModule.config.get( CausalClusteringSettings.state_machine_flush_window_size ),\n-                databaseHealthSupplier,\n-                logProvider,\n-                replicationModule.getProgressTracker(),\n-                replicationModule.getSessionTracker(),\n-                coreState,\n-                consensusModule.inFlightCache(),\n-                platformModule.monitors );\n-\n-        platformModule.dependencies.satisfyDependency( commandApplicationProcess ); // lastApplied() for CC-robustness\n-\n-        this.snapshotService = new CoreSnapshotService( commandApplicationProcess, coreState, consensusModule.raftLog(), consensusModule.raftMachine() );\n-\n-        CatchUpClient catchUpClient = createCatchupClient( clientPipelineBuilderFactory );\n-        CoreStateDownloader downloader = createCoreStateDownloader( servicesToStopOnStoreCopy, catchUpClient );\n-\n-        this.downloadService = new CoreStateDownloaderService( platformModule.jobScheduler, downloader, commandApplicationProcess, logProvider,\n-                new ExponentialBackoffStrategy( 1, 30, SECONDS ).newTimeout(), databaseHealthSupplier );\n-\n-        this.membershipWaiterLifecycle = createMembershipWaiterLifecycle();\n-\n-        SupportedProtocolCreator supportedProtocolCreator = new SupportedProtocolCreator( config, logProvider );\n-        ApplicationSupportedProtocols supportedCatchupProtocols = supportedProtocolCreator.createSupportedCatchupProtocol();\n-        Collection<ModifierSupportedProtocols> supportedModifierProtocols = supportedProtocolCreator.createSupportedModifierProtocols();\n-\n-        ApplicationProtocolRepository catchupProtocolRepository = new ApplicationProtocolRepository( ApplicationProtocols.values(), supportedCatchupProtocols );\n-        ModifierProtocolRepository modifierProtocolRepository = new ModifierProtocolRepository( ModifierProtocols.values(), supportedModifierProtocols );\n-\n-        CatchupServerHandler catchupServerHandler = new RegularCatchupServerHandler( platformModule.monitors,\n-                logProvider, localDatabase::storeId, platformModule.dependencies.provideDependency( TransactionIdStore.class ),\n-                platformModule.dependencies.provideDependency( LogicalTransactionStore.class ), localDatabase::dataSource, localDatabase::isAvailable,\n-                fileSystem, platformModule.pageCache, platformModule.storeCopyCheckPointMutex, snapshotService,\n-                new CheckpointerSupplier( platformModule.dependencies ) );\n-\n-        CatchupProtocolServerInstaller.Factory catchupProtocolServerInstaller = new CatchupProtocolServerInstaller.Factory( serverPipelineBuilderFactory,\n-                logProvider, catchupServerHandler );\n-\n-        ProtocolInstallerRepository<ProtocolInstaller.Orientation.Server> protocolInstallerRepository = new ProtocolInstallerRepository<>(\n-                singletonList( catchupProtocolServerInstaller ), ModifierProtocolInstaller.allServerInstallers );\n-\n-        HandshakeServerInitializer handshakeServerInitializer = new HandshakeServerInitializer( catchupProtocolRepository, modifierProtocolRepository,\n-                protocolInstallerRepository, serverPipelineBuilderFactory, logProvider );\n-\n-        catchupServer = new CatchupServerBuilder( catchupServerHandler )\n-                .serverHandler( installedProtocolsHandler )\n-                .catchupProtocols( supportedCatchupProtocols )\n-                .modifierProtocols( supportedModifierProtocols )\n-                .pipelineBuilder( serverPipelineBuilderFactory )\n-                .userLogProvider( userLogProvider )\n-                .debugLogProvider( logProvider )\n-                .listenAddress( config.get( transaction_listen_address ) )\n-                .serverName( \"catchup-server\" )\n-                .build();\n-\n-        TransactionBackupServiceProvider transactionBackupServiceProvider =\n-                new TransactionBackupServiceProvider( logProvider,\n-                        userLogProvider,\n-                        supportedCatchupProtocols,\n-                        supportedModifierProtocols,\n-                        backupServerPipelineBuilderFactory,\n-                        catchupServerHandler,\n-                        installedProtocolsHandler );\n-\n-        backupServer = transactionBackupServiceProvider.resolveIfBackupEnabled( config );\n-\n-        RaftLogPruner raftLogPruner = new RaftLogPruner( consensusModule.raftMachine(), commandApplicationProcess, platformModule.clock );\n-        dependencies.satisfyDependency( raftLogPruner );\n-\n-        life.add( new PruningScheduler( raftLogPruner, jobScheduler,\n-                config.get( CausalClusteringSettings.raft_log_pruning_frequency ).toMillis(), logProvider ) );\n-\n-        servicesToStopOnStoreCopy.add( this.catchupServer );\n-        backupServer.ifPresent( servicesToStopOnStoreCopy::add );\n-    }\n-\n-    private CatchUpClient createCatchupClient( NettyPipelineBuilderFactory clientPipelineBuilderFactory )\n-    {\n-        SupportedProtocolCreator supportedProtocolCreator = new SupportedProtocolCreator( config, logProvider );\n-        ApplicationSupportedProtocols supportedCatchupProtocols = supportedProtocolCreator.createSupportedCatchupProtocol();\n-        Collection<ModifierSupportedProtocols> supportedModifierProtocols = supportedProtocolCreator.createSupportedModifierProtocols();\n-        Duration handshakeTimeout = config.get( CausalClusteringSettings.handshake_timeout );\n-        long inactivityTimeoutMillis = platformModule.config.get( CausalClusteringSettings.catch_up_client_inactivity_timeout ).toMillis();\n-\n-        CatchUpClient catchUpClient = new CatchupClientBuilder( supportedCatchupProtocols, supportedModifierProtocols, clientPipelineBuilderFactory,\n-                handshakeTimeout, inactivityTimeoutMillis, logProvider, systemClock() ).build();\n-        platformModule.life.add( catchUpClient );\n-        return catchUpClient;\n-    }\n-\n-    private CoreStateDownloader createCoreStateDownloader( Suspendable servicesToSuspendOnStoreCopy, CatchUpClient catchUpClient )\n-    {\n-        ExponentialBackoffStrategy storeCopyBackoffStrategy =\n-                new ExponentialBackoffStrategy( 1, config.get( CausalClusteringSettings.store_copy_backoff_max_wait ).toMillis(), TimeUnit.MILLISECONDS );\n-\n-        RemoteStore remoteStore = new RemoteStore( logProvider, platformModule.fileSystem, platformModule.pageCache,\n-                new StoreCopyClient( catchUpClient, platformModule.monitors, logProvider, storeCopyBackoffStrategy ),\n-                new TxPullClient( catchUpClient, platformModule.monitors ), new TransactionLogCatchUpFactory(), config, platformModule.monitors );\n-\n-        CopiedStoreRecovery copiedStoreRecovery = platformModule.life.add(\n-                new CopiedStoreRecovery( platformModule.config, platformModule.kernelExtensions.listFactories(), platformModule.pageCache ) );\n-\n-        StoreCopyProcess storeCopyProcess = new StoreCopyProcess( platformModule.fileSystem, platformModule.pageCache, localDatabase,\n-                copiedStoreRecovery, remoteStore, logProvider );\n-\n-        CommitStateHelper commitStateHelper = new CommitStateHelper( platformModule.pageCache, platformModule.fileSystem, config );\n-        return new CoreStateDownloader( localDatabase, servicesToSuspendOnStoreCopy, remoteStore, catchUpClient, logProvider,\n-                                        storeCopyProcess, coreStateMachinesModule.coreStateMachines, snapshotService, commitStateHelper );\n-    }\n-\n-    private MembershipWaiterLifecycle createMembershipWaiterLifecycle()\n-    {\n-        long electionTimeout = config.get( CausalClusteringSettings.leader_election_timeout ).toMillis();\n-        MembershipWaiter membershipWaiter = new MembershipWaiter( identityModule.myself(), jobScheduler,\n-                dbHealthSupplier, electionTimeout * 4, logProvider );\n-        long joinCatchupTimeout = config.get( CausalClusteringSettings.join_catch_up_timeout ).toMillis();\n-        return new MembershipWaiterLifecycle( membershipWaiter, joinCatchupTimeout, consensusModule.raftMachine(), logProvider );\n-    }\n-\n-    public Server catchupServer()\n-    {\n-        return catchupServer;\n-    }\n-\n-    public Optional<Server> backupServer()\n-    {\n-        return backupServer;\n-    }\n-\n-    public CoreLife createCoreLife( LifecycleMessageHandler<RaftMessages.ReceivedInstantClusterIdAwareMessage<?>> handler )\n-    {\n-        return new CoreLife( consensusModule.raftMachine(),\n-                localDatabase, clusteringModule.clusterBinder(), commandApplicationProcess, coreStateMachinesModule.coreStateMachines,\n-                handler, snapshotService, downloadService );\n-    }\n-\n-    public CommandApplicationProcess commandApplicationProcess()\n-    {\n-        return commandApplicationProcess;\n-    }\n-\n-    public CoreStateDownloaderService downloadService()\n-    {\n-        return downloadService;\n-    }\n+  public static final String CLUSTER_ID_NAME = \"cluster-id\";\n+  public static final String LAST_FLUSHED_NAME = \"last-flushed\";\n+  public static final String DB_NAME = \"db-name\";\n+\n+  public final MembershipWaiterLifecycle membershipWaiterLifecycle;\n+  private final Server catchupServer;\n+  @SuppressWarnings(\"OptionalUsedAsFieldOrParameterType\")\n+  private final Optional<Server> backupServer;\n+  private final IdentityModule identityModule;\n+  private final CoreStateMachinesModule coreStateMachinesModule;\n+  private final ConsensusModule consensusModule;\n+  private final ClusteringModule clusteringModule;\n+  private final LocalDatabase localDatabase;\n+  private final Supplier<DatabaseHealth> dbHealthSupplier;\n+  private final CommandApplicationProcess commandApplicationProcess;\n+  private final CoreSnapshotService snapshotService;\n+  private final CoreStateDownloaderService downloadService;\n+  private final Config config;\n+  private final JobScheduler jobScheduler;\n+  private final LogProvider logProvider;\n+  private final PlatformModule platformModule;\n+\n+  public CoreServerModule(IdentityModule identityModule, final PlatformModule platformModule, ConsensusModule consensusModule,\n+                          CoreStateMachinesModule coreStateMachinesModule, ClusteringModule clusteringModule, ReplicationModule replicationModule,\n+                          LocalDatabase localDatabase, Supplier<DatabaseHealth> dbHealthSupplier, File clusterStateDirectory,\n+                          NettyPipelineBuilderFactory clientPipelineBuilderFactory, NettyPipelineBuilderFactory serverPipelineBuilderFactory,\n+                          NettyPipelineBuilderFactory backupServerPipelineBuilderFactory, InstalledProtocolHandler installedProtocolsHandler)\n+  {\n+    this.identityModule = identityModule;\n+    this.coreStateMachinesModule = coreStateMachinesModule;\n+    this.consensusModule = consensusModule;\n+    this.clusteringModule = clusteringModule;\n+    this.localDatabase = localDatabase;\n+    this.dbHealthSupplier = dbHealthSupplier;\n+    this.platformModule = platformModule;\n+\n+    this.config = platformModule.config;\n+    this.jobScheduler = platformModule.jobScheduler;\n+\n+    final Dependencies dependencies = platformModule.dependencies;\n+    final LogService logging = platformModule.logging;\n+    final FileSystemAbstraction fileSystem = platformModule.fileSystem;\n+    final LifeSupport life = platformModule.life;\n+\n+    this.logProvider = logging.getInternalLogProvider();\n+    LogProvider userLogProvider = logging.getUserLogProvider();\n+\n+    CompositeSuspendable servicesToStopOnStoreCopy = new CompositeSuspendable();\n+\n+    StateStorage<Long> lastFlushedStorage = platformModule.life.add(\n+        new DurableStateStorage<>(platformModule.fileSystem, clusterStateDirectory, LAST_FLUSHED_NAME, new LongIndexMarshal(),\n+            platformModule.config.get(CausalClusteringSettings.last_flushed_state_size), logProvider));\n+\n+    consensusModule.raftMembershipManager().setRecoverFromIndexSupplier(lastFlushedStorage::getInitialState);\n+\n+    CoreState coreState = new CoreState(coreStateMachinesModule.coreStateMachines,\n+        replicationModule.getSessionTracker(), lastFlushedStorage);\n+\n+    final Supplier<DatabaseHealth> databaseHealthSupplier = platformModule.dependencies.provideDependency(DatabaseHealth.class);\n+    commandApplicationProcess = new CommandApplicationProcess(\n+        consensusModule.raftLog(),\n+        platformModule.config.get(CausalClusteringSettings.state_machine_apply_max_batch_size),\n+        platformModule.config.get(CausalClusteringSettings.state_machine_flush_window_size),\n+        databaseHealthSupplier,\n+        logProvider,\n+        replicationModule.getProgressTracker(),\n+        replicationModule.getSessionTracker(),\n+        coreState,\n+        consensusModule.inFlightCache(),\n+        platformModule.monitors);\n+\n+    platformModule.dependencies.satisfyDependency(commandApplicationProcess); // lastApplied() for CC-robustness\n+\n+    this.snapshotService = new CoreSnapshotService(commandApplicationProcess, coreState, consensusModule.raftLog(), consensusModule.raftMachine());\n+\n+    CatchUpClient catchUpClient = createCatchupClient(clientPipelineBuilderFactory);\n+    CoreStateDownloader downloader = createCoreStateDownloader(servicesToStopOnStoreCopy, catchUpClient);\n+\n+    this.downloadService = new CoreStateDownloaderService(platformModule.jobScheduler, downloader, commandApplicationProcess, logProvider,\n+        new ExponentialBackoffStrategy(1, 30, SECONDS).newTimeout(), databaseHealthSupplier);\n+\n+    this.membershipWaiterLifecycle = createMembershipWaiterLifecycle();\n+\n+    SupportedProtocolCreator supportedProtocolCreator = new SupportedProtocolCreator(config, logProvider);\n+    ApplicationSupportedProtocols supportedCatchupProtocols = supportedProtocolCreator.createSupportedCatchupProtocol();\n+    Collection<ModifierSupportedProtocols> supportedModifierProtocols = supportedProtocolCreator.createSupportedModifierProtocols();\n+\n+    ApplicationProtocolRepository catchupProtocolRepository = new ApplicationProtocolRepository(ApplicationProtocols.values(), supportedCatchupProtocols);\n+    ModifierProtocolRepository modifierProtocolRepository = new ModifierProtocolRepository(ModifierProtocols.values(), supportedModifierProtocols);\n+\n+    CatchupServerHandler catchupServerHandler = new RegularCatchupServerHandler(platformModule.monitors,\n+        logProvider, localDatabase::storeId, platformModule.dependencies.provideDependency(TransactionIdStore.class),\n+        platformModule.dependencies.provideDependency(LogicalTransactionStore.class), localDatabase::dataSource, localDatabase::isAvailable,\n+        fileSystem, platformModule.pageCache, platformModule.storeCopyCheckPointMutex, snapshotService,\n+        new CheckpointerSupplier(platformModule.dependencies));\n+\n+    CatchupProtocolServerInstaller.Factory catchupProtocolServerInstaller = new CatchupProtocolServerInstaller.Factory(serverPipelineBuilderFactory,\n+        logProvider, catchupServerHandler);\n+\n+    ProtocolInstallerRepository<ProtocolInstaller.Orientation.Server> protocolInstallerRepository = new ProtocolInstallerRepository<>(\n+        singletonList(catchupProtocolServerInstaller), ModifierProtocolInstaller.allServerInstallers);\n+\n+    HandshakeServerInitializer handshakeServerInitializer = new HandshakeServerInitializer(catchupProtocolRepository, modifierProtocolRepository,\n+        protocolInstallerRepository, serverPipelineBuilderFactory, logProvider);\n+\n+    catchupServer = new CatchupServerBuilder(catchupServerHandler)\n+        .serverHandler(installedProtocolsHandler)\n+        .catchupProtocols(supportedCatchupProtocols)\n+        .modifierProtocols(supportedModifierProtocols)\n+        .pipelineBuilder(serverPipelineBuilderFactory)\n+        .userLogProvider(userLogProvider)\n+        .debugLogProvider(logProvider)\n+        .listenAddress(config.get(transaction_listen_address))\n+        .serverName(\"catchup-server\")\n+        .build();\n+\n+    TransactionBackupServiceProvider transactionBackupServiceProvider =\n+        new TransactionBackupServiceProvider(logProvider,\n+            userLogProvider,\n+            supportedCatchupProtocols,\n+            supportedModifierProtocols,\n+            backupServerPipelineBuilderFactory,\n+            catchupServerHandler,\n+            installedProtocolsHandler);\n+\n+    backupServer = transactionBackupServiceProvider.resolveIfBackupEnabled(config);\n+\n+    RaftLogPruner raftLogPruner = new RaftLogPruner(consensusModule.raftMachine(), commandApplicationProcess, platformModule.clock);\n+    dependencies.satisfyDependency(raftLogPruner);\n+\n+    life.add(new PruningScheduler(raftLogPruner, jobScheduler,\n+        config.get(CausalClusteringSettings.raft_log_pruning_frequency).toMillis(), logProvider));\n+\n+    servicesToStopOnStoreCopy.add(this.catchupServer);\n+    backupServer.ifPresent(servicesToStopOnStoreCopy::add);\n+  }\n+\n+  private CatchUpClient createCatchupClient(NettyPipelineBuilderFactory clientPipelineBuilderFactory)\n+  {\n+    SupportedProtocolCreator supportedProtocolCreator = new SupportedProtocolCreator(config, logProvider);\n+    ApplicationSupportedProtocols supportedCatchupProtocols = supportedProtocolCreator.createSupportedCatchupProtocol();\n+    Collection<ModifierSupportedProtocols> supportedModifierProtocols = supportedProtocolCreator.createSupportedModifierProtocols();\n+    Duration handshakeTimeout = config.get(CausalClusteringSettings.handshake_timeout);\n+    long inactivityTimeoutMillis = platformModule.config.get(CausalClusteringSettings.catch_up_client_inactivity_timeout).toMillis();\n+\n+    CatchUpClient catchUpClient = new CatchupClientBuilder(supportedCatchupProtocols, supportedModifierProtocols, clientPipelineBuilderFactory,\n+        handshakeTimeout, inactivityTimeoutMillis, logProvider, systemClock()).build();\n+    platformModule.life.add(catchUpClient);\n+    return catchUpClient;\n+  }\n+\n+  private CoreStateDownloader createCoreStateDownloader(Suspendable servicesToSuspendOnStoreCopy, CatchUpClient catchUpClient)\n+  {\n+    ExponentialBackoffStrategy storeCopyBackoffStrategy =\n+        new ExponentialBackoffStrategy(1, config.get(CausalClusteringSettings.store_copy_backoff_max_wait).toMillis(), TimeUnit.MILLISECONDS);\n+\n+    RemoteStore remoteStore = new RemoteStore(logProvider, platformModule.fileSystem, platformModule.pageCache,\n+        new StoreCopyClient(catchUpClient, platformModule.monitors, logProvider, storeCopyBackoffStrategy),\n+        new TxPullClient(catchUpClient, platformModule.monitors), new TransactionLogCatchUpFactory(), config, platformModule.monitors);\n+\n+    CopiedStoreRecovery copiedStoreRecovery = platformModule.life.add(\n+        new CopiedStoreRecovery(platformModule.config, platformModule.kernelExtensions.listFactories(), platformModule.pageCache));\n+\n+    StoreCopyProcess storeCopyProcess = new StoreCopyProcess(platformModule.fileSystem, platformModule.pageCache, localDatabase,\n+        copiedStoreRecovery, remoteStore, logProvider);\n+\n+    CommitStateHelper commitStateHelper = new CommitStateHelper(platformModule.pageCache, platformModule.fileSystem, config);\n+    return new CoreStateDownloader(localDatabase, servicesToSuspendOnStoreCopy, remoteStore, catchUpClient, logProvider,\n+        storeCopyProcess, coreStateMachinesModule.coreStateMachines, snapshotService, commitStateHelper);\n+  }\n+\n+  private MembershipWaiterLifecycle createMembershipWaiterLifecycle()\n+  {\n+    long electionTimeout = config.get(CausalClusteringSettings.leader_election_timeout).toMillis();\n+    MembershipWaiter membershipWaiter = new MembershipWaiter(identityModule.myself(), jobScheduler,\n+        dbHealthSupplier, electionTimeout * 4, logProvider);\n+    long joinCatchupTimeout = config.get(CausalClusteringSettings.join_catch_up_timeout).toMillis();\n+    return new MembershipWaiterLifecycle(membershipWaiter, joinCatchupTimeout, consensusModule.raftMachine(), logProvider);\n+  }\n+\n+  public Server catchupServer()\n+  {\n+    return catchupServer;\n+  }\n+\n+  public Optional<Server> backupServer()\n+  {\n+    return backupServer;\n+  }\n+\n+  public CoreLife createCoreLife(LifecycleMessageHandler<RaftMessages.ReceivedInstantClusterIdAwareMessage<?>> handler)\n+  {\n+    return new CoreLife(consensusModule.raftMachine(),\n+        localDatabase, clusteringModule.clusterBinder(), commandApplicationProcess, coreStateMachinesModule.coreStateMachines,\n+        handler, snapshotService, downloadService);\n+  }\n+\n+  public CommandApplicationProcess commandApplicationProcess()\n+  {\n+    return commandApplicationProcess;\n+  }\n+\n+  public CoreStateDownloaderService downloadService()\n+  {\n+    return downloadService;\n+  }\n }\n",
            "diff_size": 207
        },
        {
            "tool": "naturalize",
            "errors": null,
            "diff": null
        },
        {
            "tool": "codebuff",
            "errors": null,
            "diff": null
        },
        {
            "tool": "styler_random",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        },
        {
            "tool": "styler_three_grams",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        }
    ],
    "repaired_by": [],
    "not_repaired_by": [
        "styler",
        "intellij",
        "naturalize",
        "codebuff",
        "styler_random",
        "styler_three_grams"
    ]
}