{
    "project_name": "graphfoundation-ongdb",
    "error_id": "4199",
    "information": {
        "errors": [
            {
                "line": "1",
                "severity": "error",
                "message": "Missing, wrong or duplicated license header",
                "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
            }
        ]
    },
    "source_code": "/*\n * Copyright (c) 2002-2020 \"Neo4j,\"\n * Neo4j Sweden AB [http://neo4j.com]\n *",
    "results": [
        {
            "tool": "styler",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        },
        {
            "tool": "intellij",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                },
                {
                    "line": "39",
                    "column": "11",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "39",
                    "column": "80",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "45",
                    "column": "23",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "46",
                    "column": "49",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "50",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "50",
                    "column": "42",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "52",
                    "column": "28",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "52",
                    "column": "34",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "58",
                    "column": "14",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "58",
                    "column": "83",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "64",
                    "column": "14",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "64",
                    "column": "69",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "70",
                    "column": "14",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "70",
                    "column": "57",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "76",
                    "column": "14",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "76",
                    "column": "40",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "79",
                    "column": "49",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "79",
                    "column": "55",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "82",
                    "column": "22",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "83",
                    "column": "46",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "85",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "85",
                    "column": "27",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "92",
                    "column": "37",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "92",
                    "column": "76",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "95",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "95",
                    "column": "24",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "103",
                    "column": "37",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "104",
                    "column": "62",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "107",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "107",
                    "column": "24",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "116",
                    "column": "36",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "116",
                    "column": "85",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "118",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "118",
                    "column": "33",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "121",
                    "column": "5",
                    "severity": "error",
                    "message": "'}' at column 5 should be alone on a line.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.blocks.RightCurlyCheck"
                },
                {
                    "line": "121",
                    "column": "15",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "121",
                    "column": "40",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "123",
                    "column": "10",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "123",
                    "column": "23",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "127",
                    "column": "10",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "127",
                    "column": "23",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "131",
                    "column": "50",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "131",
                    "column": "75",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "135",
                    "column": "5",
                    "severity": "error",
                    "message": "'}' at column 5 should be alone on a line.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.blocks.RightCurlyCheck"
                },
                {
                    "line": "141",
                    "column": "35",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "141",
                    "column": "87",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "144",
                    "column": "8",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "144",
                    "column": "22",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "152",
                    "column": "33",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "152",
                    "column": "59",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "158",
                    "column": "35",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "158",
                    "column": "61",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "167",
                    "column": "9",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "167",
                    "column": "48",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "181",
                    "column": "15",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "181",
                    "column": "41",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "186",
                    "column": "23",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "186",
                    "column": "49",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "188",
                    "column": "10",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "188",
                    "column": "48",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "190",
                    "column": "36",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "190",
                    "column": "71",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "195",
                    "column": "25",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "195",
                    "column": "51",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "197",
                    "column": "10",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "197",
                    "column": "51",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "199",
                    "column": "39",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "199",
                    "column": "74",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "210",
                    "column": "27",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "210",
                    "column": "45",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "212",
                    "column": "10",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "212",
                    "column": "23",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "221",
                    "column": "22",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "221",
                    "column": "48",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "223",
                    "column": "12",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "223",
                    "column": "18",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "227",
                    "column": "23",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "227",
                    "column": "49",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "233",
                    "column": "25",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "233",
                    "column": "51",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "240",
                    "column": "38",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "241",
                    "column": "61",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "245",
                    "column": "39",
                    "severity": "error",
                    "message": "'(' is not followed by whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                },
                {
                    "line": "246",
                    "column": "60",
                    "severity": "error",
                    "message": "')' is not preceded with whitespace.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"
                }
            ],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/errored/1/4199/LuceneTransactionState.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/intellij/4199/LuceneTransactionState.java\nindex 49938f5b9bf..da4828cde59 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/errored/1/4199/LuceneTransactionState.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/intellij/4199/LuceneTransactionState.java\n@@ -17,6 +17,7 @@\n  * You should have received a copy of the GNU General Public License\n  * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  */\n+\n package org.neo4j.index.impl.lucene.explicit;\n \n import org.apache.lucene.search.IndexSearcher;\n@@ -33,220 +34,218 @@ import org.neo4j.index.lucene.QueryContext;\n \n class LuceneTransactionState implements Closeable\n {\n-    private final Map<IndexIdentifier, TxDataBoth> txData = new HashMap<>();\n-\n-    void add( LuceneExplicitIndex index, EntityId entity, String key, Object value )\n+  private final Map<IndexIdentifier, TxDataBoth> txData = new HashMap<>();\n+\n+  void add(LuceneExplicitIndex index, EntityId entity, String key, Object value)\n+  {\n+    TxDataBoth data = getTxData(index, true);\n+    insert(entity, key, value, data.added(true), data.removed(false));\n+  }\n+\n+  TxDataBoth getTxData(LuceneExplicitIndex index,\n+                       boolean createIfNotExists)\n+  {\n+    IndexIdentifier identifier = index.getIdentifier();\n+    TxDataBoth data = txData.get(identifier);\n+    if (data == null && createIfNotExists)\n+    {\n+      data = new TxDataBoth(index);\n+      txData.put(identifier, data);\n+    }\n+    return data;\n+  }\n+\n+  void remove(LuceneExplicitIndex index, EntityId entity, String key, Object value)\n+  {\n+    TxDataBoth data = getTxData(index, true);\n+    insert(entity, key, value, data.removed(true), data.added(false));\n+  }\n+\n+  void remove(LuceneExplicitIndex index, EntityId entity, String key)\n+  {\n+    TxDataBoth data = getTxData(index, true);\n+    insert(entity, key, null, data.removed(true), data.added(false));\n+  }\n+\n+  void remove(LuceneExplicitIndex index, EntityId entity)\n+  {\n+    TxDataBoth data = getTxData(index, true);\n+    insert(entity, null, null, data.removed(true), data.added(false));\n+  }\n+\n+  void delete(LuceneExplicitIndex index)\n+  {\n+    IndexIdentifier identifier = index.getIdentifier();\n+    txData.put(identifier, new DeletedTxDataBoth(index));\n+  }\n+\n+  private void insert(EntityId entity, String key, Object value, TxDataHolder insertInto,\n+                      TxDataHolder removeFrom)\n+  {\n+    if (removeFrom != null)\n+    {\n+      removeFrom.remove(entity, key, value);\n+    }\n+    insertInto.add(entity, key, value);\n+  }\n+\n+  Collection<EntityId> getRemovedIds(LuceneExplicitIndex index, Query query)\n+  {\n+    TxDataHolder removed = removedTxDataOrNull(index);\n+    if (removed == null)\n+    {\n+      return Collections.emptySet();\n+    }\n+    Collection<EntityId> ids = removed.query(query, null);\n+    return ids != null ? ids : Collections.emptySet();\n+  }\n+\n+  Collection<EntityId> getRemovedIds(LuceneExplicitIndex index,\n+                                     String key, Object value)\n+  {\n+    TxDataHolder removed = removedTxDataOrNull(index);\n+    if (removed == null)\n     {\n-        TxDataBoth data = getTxData( index, true );\n-        insert( entity, key, value, data.added( true ), data.removed( false ) );\n+      return Collections.emptySet();\n     }\n+    Collection<EntityId> ids = removed.get(key, value);\n+    Collection<EntityId> orphanIds = removed.getOrphans(key);\n+    return merge(ids, orphanIds);\n+  }\n \n-    TxDataBoth getTxData( LuceneExplicitIndex index,\n-            boolean createIfNotExists )\n+  static Collection<EntityId> merge(Collection<EntityId> c1, Collection<EntityId> c2)\n+  {\n+    if (c1 == null && c2 == null)\n+    {\n+      return Collections.emptySet();\n+    } else if (c1 != null && c2 != null)\n     {\n-        IndexIdentifier identifier = index.getIdentifier();\n-        TxDataBoth data = txData.get( identifier );\n-        if ( data == null && createIfNotExists )\n-        {\n-            data = new TxDataBoth( index );\n-            txData.put( identifier, data );\n-        }\n-        return data;\n+      if (c1.isEmpty())\n+      {\n+        return c2;\n+      }\n+      if (c2.isEmpty())\n+      {\n+        return c1;\n+      }\n+      Collection<EntityId> result = new HashSet<>(c1.size() + c2.size(), 1);\n+      result.addAll(c1);\n+      result.addAll(c2);\n+      return result;\n+    } else\n+    {\n+      return c1 != null ? c1 : c2;\n     }\n+  }\n \n-    void remove( LuceneExplicitIndex index, EntityId entity, String key, Object value )\n+  Collection<EntityId> getAddedIds(LuceneExplicitIndex index, String key, Object value)\n+  {\n+    TxDataHolder added = addedTxDataOrNull(index);\n+    if (added == null)\n     {\n-        TxDataBoth data = getTxData( index, true );\n-        insert( entity, key, value, data.removed( true ), data.added( false ) );\n+      return Collections.emptySet();\n     }\n+    Collection<EntityId> ids = added.get(key, value);\n+    return ids != null ? ids : Collections.emptySet();\n+  }\n+\n+  TxDataHolder addedTxDataOrNull(LuceneExplicitIndex index)\n+  {\n+    TxDataBoth data = getTxData(index, false);\n+    return data != null ? data.added(false) : null;\n+  }\n+\n+  TxDataHolder removedTxDataOrNull(LuceneExplicitIndex index)\n+  {\n+    TxDataBoth data = getTxData(index, false);\n+    return data != null ? data.removed(false) : null;\n+  }\n \n-    void remove( LuceneExplicitIndex index, EntityId entity, String key )\n+  @Override\n+  public void close()\n+  {\n+    for (TxDataBoth data : this.txData.values())\n     {\n-        TxDataBoth data = getTxData( index, true );\n-        insert( entity, key, null, data.removed( true ), data.added( false ) );\n+      data.close();\n     }\n+    this.txData.clear();\n+  }\n \n-    void remove( LuceneExplicitIndex index, EntityId entity )\n+  // Bad name\n+  private static class TxDataBoth\n+  {\n+    private TxDataHolder add;\n+    private TxDataHolder remove;\n+    final LuceneExplicitIndex index;\n+\n+    TxDataBoth(LuceneExplicitIndex index)\n     {\n-        TxDataBoth data = getTxData( index, true );\n-        insert( entity, null, null, data.removed( true ), data.added( false ) );\n+      this.index = index;\n     }\n \n-    void delete( LuceneExplicitIndex index )\n+    TxDataHolder added(boolean createIfNotExists)\n     {\n-        IndexIdentifier identifier = index.getIdentifier();\n-        txData.put( identifier, new DeletedTxDataBoth( index ) );\n+      if (this.add == null && createIfNotExists)\n+      {\n+        this.add = new TxDataHolder(index, index.type.newTxData(index));\n+      }\n+      return this.add;\n     }\n \n-    private void insert( EntityId entity, String key, Object value, TxDataHolder insertInto,\n-                                                       TxDataHolder removeFrom )\n+    TxDataHolder removed(boolean createIfNotExists)\n     {\n-        if ( removeFrom != null )\n-        {\n-            removeFrom.remove( entity, key, value );\n-        }\n-        insertInto.add( entity, key, value );\n+      if (this.remove == null && createIfNotExists)\n+      {\n+        this.remove = new TxDataHolder(index, index.type.newTxData(index));\n+      }\n+      return this.remove;\n     }\n \n-    Collection<EntityId> getRemovedIds( LuceneExplicitIndex index, Query query )\n+    void close()\n     {\n-        TxDataHolder removed = removedTxDataOrNull( index );\n-        if ( removed == null )\n-        {\n-            return Collections.emptySet();\n-        }\n-        Collection<EntityId> ids = removed.query( query, null );\n-        return ids != null ? ids : Collections.emptySet();\n+      safeClose(add);\n+      safeClose(remove);\n     }\n \n-    Collection<EntityId> getRemovedIds( LuceneExplicitIndex index,\n-            String key, Object value )\n+    private void safeClose(TxDataHolder data)\n     {\n-        TxDataHolder removed = removedTxDataOrNull( index );\n-        if ( removed == null )\n-        {\n-            return Collections.emptySet();\n-        }\n-        Collection<EntityId> ids = removed.get( key, value );\n-        Collection<EntityId> orphanIds = removed.getOrphans( key );\n-        return merge( ids, orphanIds );\n+      if (data != null)\n+      {\n+        data.close();\n+      }\n     }\n+  }\n \n-    static Collection<EntityId> merge( Collection<EntityId> c1, Collection<EntityId> c2 )\n+  private class DeletedTxDataBoth extends TxDataBoth\n+  {\n+    DeletedTxDataBoth(LuceneExplicitIndex index)\n     {\n-        if ( c1 == null && c2 == null )\n-        {\n-            return Collections.emptySet();\n-        }\n-        else if ( c1 != null && c2 != null )\n-        {\n-            if ( c1.isEmpty() )\n-            {\n-                return c2;\n-            }\n-            if ( c2.isEmpty() )\n-            {\n-                return c1;\n-            }\n-            Collection<EntityId> result = new HashSet<>( c1.size() + c2.size(), 1 );\n-            result.addAll( c1 );\n-            result.addAll( c2 );\n-            return result;\n-        }\n-        else\n-        {\n-            return c1 != null ? c1 : c2;\n-        }\n+      super(index);\n     }\n \n-    Collection<EntityId> getAddedIds( LuceneExplicitIndex index, String key, Object value )\n+    @Override\n+    TxDataHolder added(boolean createIfNotExists)\n     {\n-        TxDataHolder added = addedTxDataOrNull( index );\n-        if ( added == null )\n-        {\n-            return Collections.emptySet();\n-        }\n-        Collection<EntityId> ids = added.get( key, value );\n-        return ids != null ? ids : Collections.emptySet();\n+      throw illegalStateException();\n     }\n \n-    TxDataHolder addedTxDataOrNull( LuceneExplicitIndex index )\n+    @Override\n+    TxDataHolder removed(boolean createIfNotExists)\n     {\n-        TxDataBoth data = getTxData( index, false );\n-        return data != null ? data.added( false ) : null;\n+      throw illegalStateException();\n     }\n \n-    TxDataHolder removedTxDataOrNull( LuceneExplicitIndex index )\n+    private IllegalStateException illegalStateException()\n     {\n-        TxDataBoth data = getTxData( index, false );\n-        return data != null ? data.removed( false ) : null;\n+      throw new IllegalStateException(\"This index (\" + index.getIdentifier() +\n+          \") has been marked as deleted in this transaction\");\n     }\n+  }\n \n-    @Override\n-    public void close()\n-    {\n-        for ( TxDataBoth data : this.txData.values() )\n-        {\n-            data.close();\n-        }\n-        this.txData.clear();\n-    }\n-\n-    // Bad name\n-    private static class TxDataBoth\n-    {\n-        private TxDataHolder add;\n-        private TxDataHolder remove;\n-        final LuceneExplicitIndex index;\n-\n-        TxDataBoth( LuceneExplicitIndex index )\n-        {\n-            this.index = index;\n-        }\n-\n-        TxDataHolder added( boolean createIfNotExists )\n-        {\n-            if ( this.add == null && createIfNotExists )\n-            {\n-                this.add = new TxDataHolder( index, index.type.newTxData( index ) );\n-            }\n-            return this.add;\n-        }\n-\n-        TxDataHolder removed( boolean createIfNotExists )\n-        {\n-            if ( this.remove == null && createIfNotExists )\n-            {\n-                this.remove = new TxDataHolder( index, index.type.newTxData( index ) );\n-            }\n-            return this.remove;\n-        }\n-\n-        void close()\n-        {\n-            safeClose( add );\n-            safeClose( remove );\n-        }\n-\n-        private void safeClose( TxDataHolder data )\n-        {\n-            if ( data != null )\n-            {\n-                data.close();\n-            }\n-        }\n-    }\n-\n-    private class DeletedTxDataBoth extends TxDataBoth\n-    {\n-        DeletedTxDataBoth( LuceneExplicitIndex index )\n-        {\n-            super( index );\n-        }\n-\n-        @Override\n-        TxDataHolder added( boolean createIfNotExists )\n-        {\n-            throw illegalStateException();\n-        }\n-\n-        @Override\n-        TxDataHolder removed( boolean createIfNotExists )\n-        {\n-            throw illegalStateException();\n-        }\n-\n-        private IllegalStateException illegalStateException()\n-        {\n-            throw new IllegalStateException( \"This index (\" + index.getIdentifier() +\n-                    \") has been marked as deleted in this transaction\" );\n-        }\n-    }\n-\n-    IndexSearcher getAdditionsAsSearcher( LuceneExplicitIndex index,\n-            QueryContext context )\n-    {\n-        TxDataHolder data = addedTxDataOrNull( index );\n-        return data != null ? data.asSearcher( context ) : null;\n-    }\n+  IndexSearcher getAdditionsAsSearcher(LuceneExplicitIndex index,\n+                                       QueryContext context)\n+  {\n+    TxDataHolder data = addedTxDataOrNull(index);\n+    return data != null ? data.asSearcher(context) : null;\n+  }\n }\n",
            "diff_size": 301
        },
        {
            "tool": "naturalize",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/errored/1/4199/LuceneTransactionState.java b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/naturalize/4199/LuceneTransactionState.java\nindex 49938f5b9bf..38e5c2f901e 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/errored/1/4199/LuceneTransactionState.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/python/experiments/results/graphfoundation-ongdb/naturalize/4199/LuceneTransactionState.java\n@@ -33,7 +33,7 @@ import org.neo4j.index.lucene.QueryContext;\n \n class LuceneTransactionState implements Closeable\n {\n-    private final Map<IndexIdentifier, TxDataBoth> txData = new HashMap<>();\n+    private final Map<IndexIdentifier,TxDataBoth> txData = new HashMap<>();\n \n     void add( LuceneExplicitIndex index, EntityId entity, String key, Object value )\n     {\n@@ -51,7 +51,8 @@ class LuceneTransactionState implements Closeable\n             data = new TxDataBoth( index );\n             txData.put( identifier, data );\n         }\n-        return data;\n+\n+return data;\n     }\n \n     void remove( LuceneExplicitIndex index, EntityId entity, String key, Object value )\n@@ -78,9 +79,8 @@ class LuceneTransactionState implements Closeable\n         txData.put( identifier, new DeletedTxDataBoth( index ) );\n     }\n \n-    private void insert( EntityId entity, String key, Object value, TxDataHolder insertInto,\n-                                                       TxDataHolder removeFrom )\n-    {\n+    private void insert( EntityId entity, String key, Object value, TxDataHolder insertInto, TxDataHolder removeFrom )\n+{\n         if ( removeFrom != null )\n         {\n             removeFrom.remove( entity, key, value );\n@@ -124,7 +124,8 @@ class LuceneTransactionState implements Closeable\n             {\n                 return c2;\n             }\n-            if ( c2.isEmpty() )\n+\n+if ( c2.isEmpty() )\n             {\n                 return c1;\n             }\n@@ -238,9 +239,8 @@ class LuceneTransactionState implements Closeable\n \n         private IllegalStateException illegalStateException()\n         {\n-            throw new IllegalStateException( \"This index (\" + index.getIdentifier() +\n-                    \") has been marked as deleted in this transaction\" );\n-        }\n+            throw new IllegalStateException( \"This index (\" + index.getIdentifier() + \") has been marked as deleted in this transaction\" );\n+    }\n     }\n \n     IndexSearcher getAdditionsAsSearcher( LuceneExplicitIndex index,\n@@ -249,4 +249,4 @@ class LuceneTransactionState implements Closeable\n         TxDataHolder data = addedTxDataOrNull( index );\n         return data != null ? data.asSearcher( context ) : null;\n     }\n-}\n+}\n\\ No newline at end of file\n",
            "diff_size": 12
        },
        {
            "tool": "codebuff",
            "errors": null,
            "diff": null
        },
        {
            "tool": "styler_random",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        },
        {
            "tool": "styler_three_grams",
            "errors": [
                {
                    "line": "1",
                    "severity": "error",
                    "message": "Missing, wrong or duplicated license header",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        }
    ],
    "repaired_by": [],
    "not_repaired_by": [
        "styler",
        "intellij",
        "naturalize",
        "codebuff",
        "styler_random",
        "styler_three_grams"
    ]
}